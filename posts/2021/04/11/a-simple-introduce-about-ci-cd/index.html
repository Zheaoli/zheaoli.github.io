<!DOCTYPE html><html lang=en data-theme=auto><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>当我们在聊 CI/CD 时，我们在聊什么？ | Manjusaka</title><meta name=author content=Manjusaka><meta name=copyright content=Manjusaka><meta name=format-detection content="telephone=no"><meta name=theme-color content=ffffff><meta name=description content="本文实际上是在群内第二次分享的内容。这次其实想来聊聊，关于 CI&#x2F;CD 的一些破事和演进过程中我们所需要遇到的一些问题，当然本文中是一个偏新手向的文章和一点点爆论，随便看看就好。"><meta property=og:type content=article><meta property=og:title content="当我们在聊 CI&#x2F;CD 时，我们在聊什么？"><meta property=og:url content=https://www.manjusaka.blog/posts/2021/04/11/a-simple-introduce-about-ci-cd/index.html><meta property=og:site_name content=Manjusaka><meta property=og:description content="本文实际上是在群内第二次分享的内容。这次其实想来聊聊，关于 CI&#x2F;CD 的一些破事和演进过程中我们所需要遇到的一些问题，当然本文中是一个偏新手向的文章和一点点爆论，随便看看就好。"><meta property=og:locale content=en_US><meta property=og:image content=https://cdn.pixabay.com/photo/2023/02/04/07/50/daisy-7766609_1280.jpg><meta property=article:published_time content=2021-04-11T07:09:00.000Z><meta property=article:modified_time content=2024-10-02T11:55:45.949Z><meta property=article:author content=Manjusaka><meta property=article:tag content=编程><meta property=article:tag content=笔记><meta property=article:tag content=水文><meta name=twitter:card content=summary><meta name=twitter:image content="https://avatars.githubusercontent.com/u/7054676?v=4"><meta name=twitter:creator content=@Manjusaka_Lee><meta name=twitter:site content=https://twitter.com/Manjusaka_Lee><link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/7054676?v=4"><link rel=canonical href=https://www.manjusaka.blog/posts/2021/04/11/a-simple-introduce-about-ci-cd/index.html><link rel=preconnect href=//cdn.jsdelivr.net><link rel=preconnect href=//www.google-analytics.com crossorigin=""><link rel=preconnect href=//busuanzi.ibruce.info><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css media=print onload='this.media="all"'><script async=async src="https://www.googletagmanager.com/gtag/js?id=UA-154407994-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-154407994-1")</script><script>let GLOBAL_CONFIG={root:"/",algolia:{appId:"DL1RURGHTB",indexName:"manjusaka.blog",hits:{per_page:6},languages:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}.",hits_stats:"${hits} results found in ${time} ms"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:400},copy:{success:"Copy Successful",error:"Copy Error",noSupport:"Browser Not Supported"},relativeDate:{homepage:!0,post:!0},runtime:"days",dateSuffix:{just:"Just now",min:"minutes ago",hour:"hours ago",day:"days ago",month:"months ago"},copyright:{limitCount:100,languages:{author:"Author: Manjusaka",link:"Link: ",source:"Source: Manjusaka",info:"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},lightbox:"fancybox",Snackbar:{chs_to_cht:"You have switched to Traditional Chinese",cht_to_chs:"You have switched to Simplified Chinese",day_to_night:"You have switched to Dark Mode",night_to_day:"You have switched to Light Mode",bgLight:"#59C173",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"Load More"},isPhotoFigcaption:!0,islazyload:!0,isAnchor:!0,percent:{toc:!0,rightside:!0},autoDarkmode:!0}</script><script id=config-diff>var GLOBAL_CONFIG_SITE={title:"当我们在聊 CI/CD 时，我们在聊什么？",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-10-02 19:55:45"}</script><script>(e=>{e.saveToLocal={set:(e,t,a)=>{var o;0!==a&&(o=Date.now(),localStorage.setItem(e,JSON.stringify({value:t,expiry:o+864e5*a})))},get:e=>{var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!(Date.now()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=(o,d={})=>new Promise((t,e)=>{let a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},Object.keys(d).forEach(e=>{a.setAttribute(e,d[e])}),document.head.appendChild(a)}),e.getCSS=(o,d=!1)=>new Promise((t,e)=>{let a=document.createElement("link");a.rel="stylesheet",a.href=o,d&&(a.id=d),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};var e=saveToLocal.get("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,o=window.matchMedia("(prefers-color-scheme: no-preference)").matches,d=!t&&!a&&!o,t=(void 0===e?(a?activateLightMode():t?activateDarkMode():(o||d)&&((a=(new Date).getHours())<=6||18<=a?activateDarkMode:activateLightMode)(),window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode:activateLightMode)()})):("light"===e?activateLightMode:activateDarkMode)(),saveToLocal.get("aside-status"));void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css media=print onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css media=defer onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css media=defer onload='this.media="all"'><script src=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js></script><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title=Manjusaka type=application/atom+xml></head><body><div id=loading-box><div class=loading-left-bg></div><div class=loading-right-bg></div><div class=spinner-box><div class=configure-border-1><div class=configure-core></div></div><div class=configure-border-2><div class=configure-core></div></div><div class=loading-word>Loading...</div></div></div><script>(()=>{let d=document.getElementById("loading-box"),e=document.body,o={endLoading:()=>{e.style.overflow="",d.classList.add("loaded")},initLoading:()=>{e.style.overflow="hidden",d.classList.remove("loaded")}};o.initLoading(),window.addEventListener("load",()=>{o.endLoading()})})()</script><div id=web_bg></div><div id=sidebar><div id=menu-mask></div><div id=sidebar-menus><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/7054676?v=4" onerror='onerror=null,src="/img/friend_404.gif"' alt=avatar></div><div class="sidebar-site-data site-data is-center"><a href=/archives/ ><div class=headline>Articles</div><div class=length-num>95</div></a><a href=/tags/ ><div class=headline>Tags</div><div class=length-num>58</div></a><a href=/categories/ ><div class=headline>Categories</div><div class=length-num>38</div></a></div><hr class=custom-hr><div class=menus_items><div class=menus_item><a class=site-page href=/ ><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class=menus_item><a class="site-page group" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fa-fw fa-fw fas fa-lines-leaning"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/categories/ ><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href=/tags/ ><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href=/archives/ ><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href=/random/ ><i class="fa-fw fas fa-random"></i><span> 随便逛逛</span></a></li></ul></div><div class=menus_item><a class=site-page href=/weekly/ ><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></div><div class=menus_item><a class=site-page href=/leetcode/ ><i class="fa-fw fas fa-newspaper"></i><span> 刷题</span></a></div><div class=menus_item><a class="site-page group" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fa-fw fas fa-heart"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/about/ ><i class="fa-fw fas fa-spa"></i><span> 关于</span></a></li><li><a class="site-page child" href=/weekly/ ><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></li></ul></div></div></div></div><div class=post id=body-wrap><header class=post-bg id=page-header style=background-image:url(https://cdn.pixabay.com/photo/2023/02/04/07/50/daisy-7766609_1280.jpg)><nav id=nav><span id=blog-info><a href=/ title=Manjusaka><img class=site-icon src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/7054676?v=4# image"><span class=site-name>Manjusaka</span></a></span><div id=menus><div id=search-button><a class="site-page social-icon search" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class=menus_items><div class=menus_item><a class=site-page href=/ ><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class=menus_item><a class="site-page group" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fa-fw fa-fw fas fa-lines-leaning"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/categories/ ><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href=/tags/ ><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href=/archives/ ><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href=/random/ ><i class="fa-fw fas fa-random"></i><span> 随便逛逛</span></a></li></ul></div><div class=menus_item><a class=site-page href=/weekly/ ><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></div><div class=menus_item><a class=site-page href=/leetcode/ ><i class="fa-fw fas fa-newspaper"></i><span> 刷题</span></a></div><div class=menus_item><a class="site-page group" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fa-fw fas fa-heart"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/about/ ><i class="fa-fw fas fa-spa"></i><span> 关于</span></a></li><li><a class="site-page child" href=/weekly/ ><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></li></ul></div></div><div id=toggle-menu><a class=site-page href=javascript:void(0); rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id=post-info><h1 class=post-title>当我们在聊 CI/CD 时，我们在聊什么？<a class=post-edit-link href=https://github.com/Zheaoli/Zheaoli.github.io/edit/main/source/_posts/a-simple-introduce-about-ci-cd.md rel="external nofollow noreferrer" title="Edited on" target=_blank><i class="fas fa-pencil-alt"></i></a></h1><div id=post-meta><div class=meta-firstline><span class=post-meta-date><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class=post-meta-label>Created</span><time datetime=2021-04-11T07:09:00.000Z title="Created 2021-04-11 15:09:00">2021-04-11</time></span><span class=post-meta-categories><span class=post-meta-separator>|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class=post-meta-categories href=/categories/%E7%BC%96%E7%A8%8B/ >编程</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class=post-meta-categories href=/categories/%E7%BC%96%E7%A8%8B/%E6%9D%82%E8%AE%B0/ >杂记</a></span></div><div class=meta-secondline><span class=post-meta-separator>|</span><span class=post-meta-wordcount><i class="far fa-file-word fa-fw post-meta-icon"></i><span class=post-meta-label>Word Count:</span><span class=word-count>2.9k</span><span class=post-meta-separator>|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class=post-meta-label>Reading Time:</span><span>9mins</span></span><span class=post-meta-separator>|</span><span class=post-meta-pv-cv id="" data-flag-title="当我们在聊 CI/CD 时，我们在聊什么？"><i class="far fa-eye fa-fw post-meta-icon"></i><span class=post-meta-label>Post Views:</span><span id=busuanzi_value_page_pv><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class=layout id=content-inner><div id=post><article class=post-content id=article-container><p>本文实际上是在群内第二次分享的内容。这次其实想来聊聊，关于 CI/CD 的一些破事和演进过程中我们所需要遇到的一些问题，当然本文中是一个偏新手向的文章和一点点爆论，随便看看就好。</p><span id=more></span><h2 id=开宗明义，定义先行><a href=#开宗明义，定义先行 class=headerlink title=开宗明义，定义先行></a>开宗明义，定义先行</h2><p>在我们谈论一个事物之前，我们需要对这个事物给出一个定义，那我们先来看一下我们今天要聊的 CI 与 CD 的定义。</p><p>首先，CI 指 Continuous Integration ，在中文语境中的表述是<strong>持续集成</strong>。而 CD 在常见语境下可能是两种意思：Continuous Delivery 或 Continuous Deployment，与之对应的表述是<strong>持续交付/持续部署</strong>。这里借用一下 Brent Laster 在 <strong>What is CI/CD?</strong><a href=#refer-anchor-1><sup>1</sup></a> 中给出的定义</p><blockquote><p>Continuous integration (CI) is the process of automatically detecting, pulling, building, and (in most cases) doing unit testing as source code is changed for a product. CI is the activity that starts the pipeline (although certain pre-validations—often called “pre-flight checks”—are sometimes incorporated ahead of CI).<br>The goal of CI is to quickly make sure a new change from a developer is “good” and suitable for further use in the code base.<br>Continuous deployment (CD) refers to the idea of being able to automatically take a release of code that has come out of the CD pipeline and make it available for end users. Depending on the way the code is “installed” by users, that may mean automatically deploying something in a cloud, making an update available (such as for an app on a phone), updating a website, or simply updating the list of available releases.</p></blockquote><p>光看定义，可能大家还是会很懵逼，那么下面我们用一些实际的例子来给大家从头捋一遍 CI/CD 那些事</p><h2 id=Re：从0开始构建流程><a href=#Re：从0开始构建流程 class=headerlink title=Re：从0开始构建流程></a>Re：从0开始构建流程</h2><p>这个标题好像起的有点草，不过不管了。首先我们假定这样一个最简单的需求</p><blockquote><p>我们基于 Hexo 构建了一个个人的博客系统。其中包含我们所需要发布的文章，我们配置的主题。我们需要将其发布到具体的 Repo 上。</p></blockquote><p>好了，基于这个需求，我们来从0到0玩一圈吧（笑（</p><h3 id=构建原生之初><a href=#构建原生之初 class=headerlink title=构建原生之初></a>构建原生之初</h3><p>可能这里有很多人会问，为啥会选择 Hexo 来作为我们的切入点。原因很简单啊！因为它够简单啊！</p><p>言归正传，首先 Hexo 有两个命令 <code>hexo g</code> &amp;&amp; <code>hexo d</code> ，分别是根据当前目录下的 Markdown 文件来生成静态的网页。然后将生成的产物根据配置推送到对应的 repo 上</p><p>OK，那么我们在最原始的阶段一个构建的流程就是这样</p><ol><li>用一个编辑器，开开心心的写文章</li><li>然后在本地终端执行 <code>hexo g &amp;&amp; hexo d</code></li></ol><p>问题来了，现在有些时候提交了博客，但是忘了执行生成命令怎么办？或者是我每次都需要敲重复的命令很麻烦怎么办？那就让我们把整个过程自动化一下吧。Let’s rock!</p><h3 id=更进一步的构建><a href=#更进一步的构建 class=headerlink title=更进一步的构建></a>更进一步的构建</h3><p>OK，我们先来假设一下，我们如果完成了自动化，我们现在发布一个博客的工作流应该编程什么样的</p><ol><li>我们编写一个 Markdown 文件，推送到 GitHub 仓库里的 Master 分支上</li><li>我们的自动任务开始构建我们博客，生成一系列静态文件和样式</li><li>将我们的静态文件和样式推送到我们的站点 Repo/CDN 等目标位置</li></ol><p>好了，那么这里有两个核心的问题</p><ol><li>在我们推送代码的时候，自动开始构建</li><li>在构建完成后，推送产物</li></ol><p>那我们现在基于 GitHub Action 来配置一套我们的自动化构建任务</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre></td><td class=code><pre><span class=line><span class=attr>name:</span> <span class=string>Build</span> <span class=string>And</span> <span class=string>Publish</span> <span class=string>Blog</span></span><br><span class=line><span class=attr>on:</span></span><br><span class=line>  <span class=attr>push:</span></span><br><span class=line>    <span class=attr>branches:</span> [ <span class=string>master</span> ]</span><br><span class=line></span><br><span class=line><span class=attr>jobs:</span></span><br><span class=line>  <span class=attr>build:</span></span><br><span class=line>    <span class=attr>runs-on:</span> <span class=string>ubuntu-latest</span></span><br><span class=line>    <span class=attr>steps:</span></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>uses:</span> <span class=string>actions/checkout@v2</span></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>uses:</span> <span class=string>actions/setup-node@v1</span></span><br><span class=line>        <span class=attr>with:</span></span><br><span class=line>          <span class=attr>node-version:</span> <span class=string>&#x27;12.x&#x27;</span></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>Install</span> <span class=string>Package</span></span><br><span class=line>        <span class=attr>run:</span> <span class=string>npm</span> <span class=string>install</span> <span class=string>-g</span> <span class=string>hexo-cli</span> <span class=string>&amp;&amp;</span> <span class=string>npm</span> <span class=string>install</span></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>Generate</span> <span class=string>Html</span> <span class=string>File</span></span><br><span class=line>        <span class=attr>run:</span> <span class=string>hexo</span> <span class=string>g</span></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>Deploy</span> <span class=string>🚀</span></span><br><span class=line>        <span class=attr>uses:</span> <span class=string>JamesIves/github-pages-deploy-action@3.7.1</span></span><br><span class=line>        <span class=attr>with:</span></span><br><span class=line>          <span class=attr>GITHUB_TOKEN:</span> <span class=string>$&#123;&#123;</span> <span class=string>secrets.PUBLSH_TOKEN</span> <span class=string>&#125;&#125;</span></span><br><span class=line>          <span class=attr>BRANCH:</span> <span class=string>gh-pages</span> <span class=comment># The branch the action should deploy to.</span></span><br><span class=line>          <span class=attr>FOLDER:</span> <span class=string>public</span> <span class=comment># The folder the action should deploy.</span></span><br></pre></td></tr></table></figure><p>我们能看到这段配置实际上完成了这样一些事情</p><ol><li>在我们往 master 分支提交代码的时候触发构建</li><li>拉取代码</li><li>安装构建所需依赖</li><li>构建生成静态文件</li><li>推送静态文件</li></ol><p>如果上面任何一个步骤失败了，都将取消后面步骤的执行。实际上这样一个简单的任务已经包含了一个 CI &amp;&amp; CD 所包含的基础要素（这里 CD 我并未严格区分 Continuous Delivery/Continuous Deployment)</p><ol><li>与已有的代码持续的构建与集成</li><li>集成中区分多个 phase。每个 phase 将依赖上个 phase 结果。</li><li>将构建产物交付/部署出去。交付/部署的成功依赖于集成的成功</li></ol><p>那么在这里，我们将博客系统换成一个我们工程中的例子。将 Hexo 换成我们的 Python 服务。将新增博文换成我们的新增的代码。将构建命令换成 mypy/pylint 等检查工具。你看，CI/CD 实际上和你想象的复杂的系统，是不是有很大差别？</p><p>这里可能有很多人会提出这样一个问题，如果说这里我们将这些命令，不用线上的形式触发。而在本地用 Git Hook 等形式进行实现。那么这算不算一种 CI 与 CD 呢？我觉得毫无疑问算的，从我的视角来看，CI/CD 核心的要素在于通过可以重复，自动化的任务，来尽早暴露缺陷，减轻人为因素所带来的不必要的事故发生。</p><h2 id=这个开发过份傻逼却不谨慎><a href=#这个开发过份傻逼却不谨慎 class=headerlink title=这个开发过份傻逼却不谨慎></a>这个开发过份傻逼却不谨慎</h2><p>首先抛出一个最基础的爆论，然后我们接着往下谈</p><blockquote><p>所有人都有傻逼的时候，而且这个傻逼的时候可能还会很多。</p></blockquote><p>在这样一个爆论的情况下，我们来回顾一下上面举<strong>基于 Hexo 去构建一个个人博客系统</strong>的例子中，如果我们不选择通过一种收敛的，自动化的系统去解决我们的构建，发布需求。那么我们哪些环节会出现风险</p><ol><li>最基础的，写完博客，忘了构建，忘了发布</li><li>比如我们升级一下依赖中的 Hexo 版本或者主题版本，我们没有测试，导致构建出来的样式失效</li><li>我们的 Markdown 有问题，导致构建失败</li><li>比如多个人维护一个博客的情况下，我们每个人都需要保存目标仓库/CDN的密钥等信息。导致信息泄漏等</li></ol><p>将<strong>基于 Hexo 去构建一个个人博客系统</strong>的例子切换成我们日常开发的场景，那么我们可能遇到的问题会更多。简单举几个</p><ol><li>没法很快速的回滚</li><li>没法溯源具体的构建/发布记录</li><li>没有自动化的任务，研发懒得跑测试或者 lint 导致代码腐化</li><li>高峰期上线导致事故</li></ol><p>嗯，这些问题大家是不是都很熟悉？大概就是，我起了，构建了，出事故了，有啥好说的23333</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://user-images.githubusercontent.com/7054676/114294469-75cacf00-9ad1-11eb-8853-20e5a50bacce.png alt=image></p><p>讲到这里的大家实际上有没有发现一个问题？我在这篇文章中，没有对 CI 与 CD 进行区分？从我的视角来看，CI/CD 本质上是践行的同一个事。即 <strong>对于研发流程与交付流程的收敛</strong></p><p>从我的视角来看，去构建一个 CI/CD 系统核心的目标在于</p><ol><li>通过收敛入口以及自动化的任务触发，尽可能减轻人为因素所带来的系统不稳定性</li><li>通过快速，多次，可重复，无感知的任务，尽可能的在较早阶段暴露系统中的问题</li></ol><p>在这样两个大目标的前提下，我们便会根据不同的业务场景，采用不同的手段与形式丰富我们 CI/CD 中的内容，包括不仅限于</p><ol><li>在 CI 阶段自动化的单元测试，E2E 测试等</li><li>在 CI 阶段周期性的 Nighty Build 等</li><li>在 CD 阶段进行发布管控等</li></ol><p>不过无论我们怎么样去构建一个 CI/CD 系统，或者选择什么样的粒度去进行 CI/CD。我觉得一个合格的 CI/CD 系统与机制 都需要遵照这样几个原则（个人向总结）</p><ol><li>入口的收敛，SOP 的建立。如果不达成这点共识，研发能够通过技术手段绕过 CI/CD 系统那么便又回到的了我们本章的标题（这个研发过份傻逼却不谨慎）</li><li>对于业务代码无侵入</li><li>集成任务/发布任务一定要是自动化，可重复的</li><li>可回溯的历史记录与结果</li><li>可回溯的构建集成产物</li><li>从上到下的支持</li></ol><p>那么遵照我总结的这样几个原则，我们来迭代一下我们之前的博客的发布过程</p><figure class="highlight yaml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br></pre></td><td class=code><pre><span class=line><span class=attr>name:</span> <span class=string>Build</span> <span class=string>And</span> <span class=string>Publish</span> <span class=string>Blog</span></span><br><span class=line><span class=attr>on:</span></span><br><span class=line>  <span class=attr>push:</span></span><br><span class=line>    <span class=attr>branches:</span> [ <span class=string>master</span> ]</span><br><span class=line>  <span class=attr>pull_request:</span></span><br><span class=line>    <span class=attr>branches:</span> [ <span class=string>master</span> ]</span><br><span class=line><span class=attr>jobs:</span></span><br><span class=line>  <span class=attr>build:</span></span><br><span class=line>    <span class=attr>runs-on:</span> <span class=string>ubuntu-latest</span></span><br><span class=line>    <span class=attr>steps:</span></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>uses:</span> <span class=string>actions/checkout@v2</span></span><br><span class=line></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>uses:</span> <span class=string>actions/setup-node@v1</span></span><br><span class=line>        <span class=attr>with:</span></span><br><span class=line>          <span class=attr>node-version:</span> <span class=string>&#x27;12.x&#x27;</span></span><br><span class=line></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>Install</span> <span class=string>Package</span></span><br><span class=line>        <span class=attr>run:</span> <span class=string>npm</span> <span class=string>install</span> <span class=string>-g</span> <span class=string>hexo-cli</span> <span class=string>&amp;&amp;</span> <span class=string>npm</span> <span class=string>install</span></span><br><span class=line></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>Generate</span> <span class=string>Html</span> <span class=string>File</span></span><br><span class=line>        <span class=attr>run:</span> <span class=string>hexo</span> <span class=string>g</span></span><br><span class=line></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>Deploy</span> <span class=string>To</span> <span class=string>Repo🚀</span></span><br><span class=line>        <span class=attr>if:</span> <span class=string>$&#123;&#123;</span> <span class=string>github.ref</span> <span class=string>==</span> <span class=string>&#x27;refs/heads/master&#x27;</span><span class=string>&#125;&#125;</span></span><br><span class=line>        <span class=attr>uses:</span> <span class=string>JamesIves/github-pages-deploy-action@3.7.1</span></span><br><span class=line>        <span class=attr>with:</span></span><br><span class=line>          <span class=attr>GITHUB_TOKEN:</span> <span class=string>$&#123;&#123;</span> <span class=string>secrets.PUBLSH_TOKEN</span> <span class=string>&#125;&#125;</span></span><br><span class=line>          <span class=attr>BRANCH:</span> <span class=string>gh-pages</span> <span class=comment># The branch the action should deploy to.</span></span><br><span class=line>          <span class=attr>FOLDER:</span> <span class=string>public</span> <span class=comment># The folder the action should deploy.</span></span><br><span class=line>      <span class=bullet>-</span> <span class=attr>name:</span> <span class=string>Upload</span> <span class=string>to</span> <span class=string>Collect</span> <span class=string>Repo</span></span><br><span class=line>        <span class=attr>uses:</span> <span class=string>JamesIves/github-pages-deploy-action@3.7.1</span></span><br><span class=line>        <span class=attr>with:</span></span><br><span class=line>          <span class=attr>GITHUB_TOKEN:</span> <span class=string>$&#123;&#123;</span> <span class=string>secrets.PUBLSH_TOKEN</span> <span class=string>&#125;&#125;</span></span><br><span class=line>          <span class=attr>BRANCH:</span> <span class=string>build-$&#123;&#123;</span> <span class=string>github.run_id</span> <span class=string>&#125;&#125;</span> <span class=comment># The branch the action should deploy to.</span></span><br><span class=line>          <span class=attr>FOLDER:</span> <span class=string>public</span> <span class=comment># The folder the action should deploy.</span></span><br></pre></td></tr></table></figure><p>在这段更改后的构建流程中，我选择以 PR 为粒度去触发 CI 流程，并将历史产物进行存储，而在合并主分支后，新增发布流程。在这样一来，我在博客构建发布的时候，便能够通过回溯的历史产物来验证我框架升级，新增博文等操作的正确性。同时依托 GitHub Action，我能很好的完成历史构建的回溯</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://user-images.githubusercontent.com/7054676/114294865-f38fda00-9ad3-11eb-938b-c25b7a4ca6bf.png alt=image></p><p>嗯，这样便可以尽可能避免我傻逼的操作所带来的各种副作用（逃</p><h2 id=进击的构建：终章><a href=#进击的构建：终章 class=headerlink title=进击的构建：终章></a>进击的构建：终章</h2><p>好了，啥都没有，傻眼了吧<br>。<br>。<br>。<br>。</p><p>只是开个玩笑。实际上本文到这差不多就可以告一段落了。实际上大家通过这篇文章可以发现一个问题。就是实际上构建一个 CI/CD 系统可能并不会涉及很多，很高深的技术问题(极少数的场景除外）无论是传统的 Jenkins，还是新生的 GitHub Action，GitLab-CI，亦或者是云厂商提供的服务都能很好的帮助我们去构建一套贴合业务的 CI/CD 系统。但我之前在推特上发表了的一个爆论“CI/CD 的建立往往不是一个技术问题，而是一个制度问题，更可以称为是一个想法问题”。</p><p>所以，我希望我们每个人都能认识到我们都会犯错这样一个事实。然后尽可能的将自己所负责的系统的开发流程与交付流程尽可能的收敛与自动化。让一个 CI/CD 真正称为我们日常工作中的一部分。</p><p>差不多这样，溜了，溜了。</p></article><div class=post-copyright><div class=post-copyright__author><span class=post-copyright-meta><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class=post-copyright-info><a target=_blank rel="noopener external nofollow noreferrer" href=https://github.com/Zheaoli>Manjusaka</a></span></div><div class=post-copyright__type><span class=post-copyright-meta><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class=post-copyright-info><a href=https://www.manjusaka.blog/posts/2021/04/11/a-simple-introduce-about-ci-cd/ >https://www.manjusaka.blog/posts/2021/04/11/a-simple-introduce-about-ci-cd/</a></span></div><div class=post-copyright__notice><span class=post-copyright-meta><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class=post-copyright-info>All articles in this blog are licensed under <a target=_blank rel="noopener external nofollow noreferrer" href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/%E7%BC%96%E7%A8%8B/ >编程</a><a class=post-meta__tags href=/tags/%E7%AC%94%E8%AE%B0/ >笔记</a><a class=post-meta__tags href=/tags/%E6%B0%B4%E6%96%87/ >水文</a></div><div class=post_share><div class=social-share data-image=https://cdn.pixabay.com/photo/2023/02/04/07/50/daisy-7766609_1280.jpg data-sites=facebook,twitter,wechat,weibo,qq></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css media=print onload='this.media="all"'><script src=https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js defer=defer></script></div></div><div class=ads-wrap><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-7962287588031867 data-ad-slot=2542544532></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><nav class=pagination-post id=pagination><div class="prev-post pull-left"><a href=/posts/2021/04/17/how-to-tracing-package-in-the-linux-kernel/ title="利用动态 tracing 技术来 trace 内核中的网络请求"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/01/14/19/50/flower-7718952_1280.jpg onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class=pagination-info><div class=label>Previous</div><div class=prev_info>利用动态 tracing 技术来 trace 内核中的网络请求</div></div></a></div><div class="next-post pull-right"><a href=/posts/2021/02/27/damn-the-init-process/ title=继续爆论容器中的一号进程><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/01/30/19/40/gulls-7756481_1280.jpg onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class=pagination-info><div class=label>Next</div><div class=next_info>继续爆论容器中的一号进程</div></div></a></div></nav><div class=relatedPosts><div class=headline><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class=relatedPosts-list><div><a href=/posts/2024/02/10/CVE-2024-21626/ title="简单聊聊 CVE-2024-21626"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/50/daisy-7766609_1280.jpg alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2024-02-11</div><div class=title>简单聊聊 CVE-2024-21626</div></div></a></div><div><a href=/posts/2021/11/22/a-litte-introduction-about-nohdr-filed-in-skbuff/ title="聊聊 sk_buff 中一个冷门字段: nohdr"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/06/16/46/sea-7772372_1280.jpg alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2021-11-22</div><div class=title>聊聊 sk_buff 中一个冷门字段: nohdr</div></div></a></div><div><a href=/posts/2023/08/22/a-little-bit-idea-about-unwind/ title=关于用户态栈回溯（Unwind）的一些杂记和想法><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/01/14/19/50/flower-7718952_1280.jpg alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2023-08-23</div><div class=title>关于用户态栈回溯（Unwind）的一些杂记和想法</div></div></a></div><div><a href=/posts/2023/08/26/a-little-bit-design-about-cpu-burst-in-k8s/ title="关于 CPU Burst 在 K8s 中的一些设计想法"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/50/flower-7766608_1280.jpg alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2023-08-27</div><div class=title>关于 CPU Burst 在 K8s 中的一些设计想法</div></div></a></div><div><a href=/posts/2021/08/24/a-little-problem-about-posix-node-js-execsync/ title="关于 Node.js 中 execSync 的一点问题"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/08/15/10/sculpture-7776861_1280.jpg alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2021-08-24</div><div class=title>关于 Node.js 中 execSync 的一点问题</div></div></a></div><div><a href=/posts/2024/09/18/a-live-debug-ecapture-gh-604/ title="Debug 日志：eCapture GH-604"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/38/cherry-blossoms-7766587_1280.jpg alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2024-09-18</div><div class=title>Debug 日志：eCapture GH-604</div></div></a></div></div></div><hr class=custom-hr><div id=post-comment><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class=comment-wrap><div><div id=disqus_thread></div></div></div></div></div><div class=aside-content id=aside-content><div class="card-widget card-info"><div class=is-center><div class=avatar-img><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/7054676?v=4" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt=avatar></div><div class=author-info__name>Manjusaka</div><div class=author-info__description>热忱之心不可磨灭</div></div><div class="card-info-data site-data is-center"><a href=/archives/ ><div class=headline>Articles</div><div class=length-num>95</div></a><a href=/tags/ ><div class=headline>Tags</div><div class=length-num>58</div></a><a href=/categories/ ><div class=headline>Categories</div><div class=length-num>38</div></a></div><a id=card-info-btn target=_blank rel="noopener external nofollow noreferrer" href=https://github.com/Zheaoli><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class=social-icon href=https://github.com/ZheaoLi rel="external nofollow noreferrer" target=_blank title=Github><i class="fab fa-github"></i></a><a class=social-icon href=mailto:me@manjusaka.me rel="external nofollow noreferrer" target=_blank title=Email><i class="fas fa-envelope"></i></a><a class=social-icon href=https://twitter.com/Manjusaka_Lee rel="external nofollow noreferrer" target=_blank title=推特><i class="fab fa-twitter"></i></a><a class=social-icon href=/atom.xml target=_blank title=RSS><i class="fa-solid fa-feed"></i></a></div></div><div class="card-widget card-announcement"><div class=item-headline><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class=announcement_content>This is my Blog</div></div><div class=sticky_layout><div class=card-widget id=card-toc><div class=item-headline><i class="fas fa-stream"></i><span>Contents</span><span class=toc-percentage></span></div><div class="toc-content is-expand"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%BC%80%E5%AE%97%E6%98%8E%E4%B9%89%EF%BC%8C%E5%AE%9A%E4%B9%89%E5%85%88%E8%A1%8C><span class=toc-number>1.</span> <span class=toc-text>开宗明义，定义先行</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#Re%EF%BC%9A%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B><span class=toc-number>2.</span> <span class=toc-text>Re：从0开始构建流程</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%94%9F%E4%B9%8B%E5%88%9D><span class=toc-number>2.1.</span> <span class=toc-text>构建原生之初</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%9B%B4%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%9A%84%E6%9E%84%E5%BB%BA><span class=toc-number>2.2.</span> <span class=toc-text>更进一步的构建</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%BF%99%E4%B8%AA%E5%BC%80%E5%8F%91%E8%BF%87%E4%BB%BD%E5%82%BB%E9%80%BC%E5%8D%B4%E4%B8%8D%E8%B0%A8%E6%85%8E><span class=toc-number>3.</span> <span class=toc-text>这个开发过份傻逼却不谨慎</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%BF%9B%E5%87%BB%E7%9A%84%E6%9E%84%E5%BB%BA%EF%BC%9A%E7%BB%88%E7%AB%A0><span class=toc-number>4.</span> <span class=toc-text>进击的构建：终章</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class="fas fa-history"></i><span>Recent Post</span></div><div class=aside-list><div class=aside-list-item><a class=thumbnail href=/posts/2024/10/02/how-to-extend-the-wasi-python-by-using-host-function-en/ title="How to Run CPython for WASI Using WASMTIME and Extend It with Python-Implemented Host Functions?"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/50/flower-7766608_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="How to Run CPython for WASI Using WASMTIME and Extend It with Python-Implemented Host Functions?"></a><div class=content><a class=title href=/posts/2024/10/02/how-to-extend-the-wasi-python-by-using-host-function-en/ title="How to Run CPython for WASI Using WASMTIME and Extend It with Python-Implemented Host Functions?">How to Run CPython for WASI Using WASMTIME and Extend It with Python-Implemented Host Functions?</a><time datetime=2024-10-02T13:00:00.000Z title="Created 2024-10-02 21:00:00">2024-10-02</time></div></div><div class=aside-list-item><a class=thumbnail href=/posts/2024/10/02/how-to-extend-the-wasi-python-by-using-host-function-cn/ title="如何使用 WASMTIME 来运行 CPython for WASI，然后利用 Python 实现的 HostFunction 来扩展它？"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/01/30/19/40/gulls-7756481_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="如何使用 WASMTIME 来运行 CPython for WASI，然后利用 Python 实现的 HostFunction 来扩展它？"></a><div class=content><a class=title href=/posts/2024/10/02/how-to-extend-the-wasi-python-by-using-host-function-cn/ title="如何使用 WASMTIME 来运行 CPython for WASI，然后利用 Python 实现的 HostFunction 来扩展它？">如何使用 WASMTIME 来运行 CPython for WASI，然后利用 Python 实现的 HostFunction 来扩展它？</a><time datetime=2024-10-02T13:00:00.000Z title="Created 2024-10-02 21:00:00">2024-10-02</time></div></div><div class=aside-list-item><a class=thumbnail href=/posts/2024/09/18/a-live-debug-ecapture-gh-604/ title="Debug 日志：eCapture GH-604"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/38/cherry-blossoms-7766587_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Debug 日志：eCapture GH-604"></a><div class=content><a class=title href=/posts/2024/09/18/a-live-debug-ecapture-gh-604/ title="Debug 日志：eCapture GH-604">Debug 日志：eCapture GH-604</a><time datetime=2024-09-18T14:00:00.000Z title="Created 2024-09-18 22:00:00">2024-09-18</time></div></div><div class=aside-list-item><a class=thumbnail href=/posts/2024/08/19/benchmark-for-python-web-framework-2024-part1-cn/ title="2024 年了，是 Gevent 还是选择 asyncio Part 1？"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/08/15/10/sculpture-7776861_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="2024 年了，是 Gevent 还是选择 asyncio Part 1？"></a><div class=content><a class=title href=/posts/2024/08/19/benchmark-for-python-web-framework-2024-part1-cn/ title="2024 年了，是 Gevent 还是选择 asyncio Part 1？">2024 年了，是 Gevent 还是选择 asyncio Part 1？</a><time datetime=2024-08-19T17:00:00.000Z title="Created 2024-08-20 01:00:00">2024-08-20</time></div></div><div class=aside-list-item><a class=thumbnail href=/posts/2024/08/19/benchmark-for-python-web-framework-2024-part1-en/ title="In 2024, Gevent or asyncio? Part 1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/07/14/45/snow-7774312_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="In 2024, Gevent or asyncio? Part 1"></a><div class=content><a class=title href=/posts/2024/08/19/benchmark-for-python-web-framework-2024-part1-en/ title="In 2024, Gevent or asyncio? Part 1">In 2024, Gevent or asyncio? Part 1</a><time datetime=2024-08-19T17:00:00.000Z title="Created 2024-08-20 01:00:00">2024-08-20</time></div></div></div></div><div class="card-widget ads-wrap"><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7962287588031867 data-ad-slot=1257383027 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></main><footer id=footer style="background:0 0"><div id=footer-wrap><div class=copyright>&copy;2020 - 2024 By Manjusaka</div><div class=framework-info><span>Framework </span><a target=_blank rel="noopener external nofollow noreferrer" href=https://hexo.io>Hexo</a><span class=footer-separator>|</span><span>Theme </span><a target=_blank rel="noopener external nofollow noreferrer" href=https://github.com/jerryc127/hexo-theme-butterfly>Butterfly</a></div></div></footer></div><div id=rightside><div id=rightside-config-hide></div><div id=rightside-config-show><button id=darkmode type=button title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id=translateLink type=button title="Toggle Between Traditional Chinese And Simplified Chinese">简</button><button id=readmode type=button title="Read Mode"><i class="fas fa-book-open"></i></button><button id=go-up type=button title="Back To Top"><span class=scroll-percent></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src=https://www.manjusaka.blog/js/utils.js></script><script src=https://www.manjusaka.blog/js/main.js></script><script src=https://www.manjusaka.blog/js/tw_cn.js></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js></script><script src=https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js></script><script src=https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><div class=js-pjax><script>(()=>{let t=document.querySelectorAll("#article-container .mermaid-wrap");if(0!==t.length){let e=()=>{window.loadMermaid=!0;let r="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(t).forEach((e,t)=>{let d=e.firstElementChild;e="%%{init:{ 'theme':'"+r+"'}}%%\n"+d.textContent;let n=mermaid.render("mermaid-"+t,e);"string"==typeof n?(t=n,d.insertAdjacentHTML("afterend",t)):n.then(({svg:e})=>{d.insertAdjacentHTML("afterend",e)})})};var d=()=>{window.loadMermaid?e():getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(e)};btf.addGlobalFn("themeChange",e,"mermaid"),window.pjax?d():document.addEventListener("DOMContentLoaded",d)}})()</script><script>(()=>{function t(){this.page.url="https://www.manjusaka.blog/posts/2021/04/11/a-simple-introduce-about-ci-cd/",this.page.identifier="/posts/2021/04/11/a-simple-introduce-about-ci-cd/",this.page.title="当我们在聊 CI/CD 时，我们在聊什么？"}let e=()=>{window.DISQUS&&window.DISQUS.reset({reload:!0,config:t})};btf.addGlobalFn("themeChange",e,"disqus");var a=()=>{var t;window.DISQUS?e():((t=document.createElement("script")).src="https://manjusakablog.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),document.head.appendChild(t))};a()})()</script></div><script defer=defer id=fluttering_ribbon mobile=false src=https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js></script><script src=https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script async data-pjax src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><div id=algolia-search><div class=search-dialog><nav class=search-nav><span class=search-dialog-title>Search</span><button class=search-close-button><i class="fas fa-times"></i></button></nav><div class=search-wrap><div id=algolia-search-input></div><hr><div id=algolia-search-results><div id=algolia-hits></div><div id=algolia-pagination></div><div id=algolia-info><div class=algolia-stats></div><div class=algolia-poweredBy></div></div></div></div></div><div id=search-mask></div><script src=https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js></script><script src=https://www.manjusaka.blog/js/search/algolia.js></script></div></div><script data-pjax>function butterfly_swiper_injector_config(){var s=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),s.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2024/02/20/a-simple-discussion-about-the-ultraman/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/04/07/50/daisy-7766609_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-20</span><a class="blog-slider__title" href="/posts/2024/02/20/a-simple-discussion-about-the-ultraman/" alt="">简单聊聊奥特曼中很有趣的细节</a><div class="blog-slider__text">ヒーロが必要なんだよ，金城君。ヒーローが必要なんだ！</div><a class="blog-slider__button" href="/posts/2024/02/20/a-simple-discussion-about-the-ultraman/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/12/29/per-aspera-ad-astra/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/06/16/46/sea-7772372_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-29</span><a class="blog-slider__title" href="/posts/2023/12/29/per-aspera-ad-astra/" alt="">Per aspera, Ad astra</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="/posts/2023/12/29/per-aspera-ad-astra/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/10/24/open-source-is-simple-than-you-think/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/01/30/19/40/gulls-7756481_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-10-24</span><a class="blog-slider__title" href="/posts/2023/10/24/open-source-is-simple-than-you-think/" alt="">开源可能没你想的那么难</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="/posts/2023/10/24/open-source-is-simple-than-you-think/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/06/25/love-and-hope-is-all-we-need/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://github.com/Zheaoli/yuque-py/assets/7054676/ea9460a2-e351-4b73-9f82-7aef6cd20c33" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-25</span><a class="blog-slider__title" href="/posts/2023/06/25/love-and-hope-is-all-we-need/" alt="">聊聊公益和助学</a><div class="blog-slider__text">很多时候，帮助人不需要那么多理由</div><a class="blog-slider__button" href="/posts/2023/06/25/love-and-hope-is-all-we-need/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/12/28/how-do-I-build-homelab-part2/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/08/15/10/sculpture-7776861_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-28</span><a class="blog-slider__title" href="/posts/2023/12/28/how-do-I-build-homelab-part2/" alt="">家庭 Homelab 升级计划: v2</a><div class="blog-slider__text">人生嘛，Homelab 图个乐子</div><a class="blog-slider__button" href="/posts/2023/12/28/how-do-I-build-homelab-part2/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/06/19/why-do-I-love-ultraman/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://user-images.githubusercontent.com/7054676/228287041-c86e7928-0da8-4097-b7ff-e575faa8cf8c.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-19</span><a class="blog-slider__title" href="/posts/2023/06/19/why-do-I-love-ultraman/" alt="">为什么奥特曼是我的信仰</a><div class="blog-slider__text">優しさを失わないでくれ。弱い者を労り互いに助け合い。</div><a class="blog-slider__button" href="/posts/2023/06/19/why-do-I-love-ultraman/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/06/16/how-do-I-build-homelab/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/01/30/19/40/gulls-7756481_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-16</span><a class="blog-slider__title" href="/posts/2023/06/16/how-do-I-build-homelab/" alt="">家庭 Homelab 升级计划</a><div class="blog-slider__text">人生嘛，Homelab 图个乐子</div><a class="blog-slider__button" href="/posts/2023/06/16/how-do-I-build-homelab/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer=defer src=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js></script><script defer=defer data-pjax src=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js></script><script async src=//at.alicdn.com/t/font_2032782_8d5kxvn09md.js></script></body></html>