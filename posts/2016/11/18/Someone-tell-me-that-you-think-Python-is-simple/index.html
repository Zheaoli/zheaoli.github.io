<!DOCTYPE html><html lang=en data-theme=auto><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>听说你会 Python ？ | Manjusaka</title><meta name=author content=Manjusaka><meta name=copyright content=Manjusaka><meta name=format-detection content="telephone=no"><meta name=theme-color content=ffffff><meta name=description content="前言最近觉得 Python 太“简单了”，于是在师父川爷面前放肆了一把：“我觉得 Python 是世界上最简单的语言！”。于是川爷嘴角闪过了一丝轻蔑的微笑（内心 OS：Naive！，作为一个 Python 开发者，我必须要给你一点人生经验，不然你不知道天高地厚！）于是川爷给我了一份满分 100 分的题，然后这篇文章就是记录下做这套题所踩过的坑。"><meta property=og:type content=article><meta property=og:title content="听说你会 Python ？"><meta property=og:url content=https://www.manjusaka.blog/posts/2016/11/18/Someone-tell-me-that-you-think-Python-is-simple/index.html><meta property=og:site_name content=Manjusaka><meta property=og:description content="前言最近觉得 Python 太“简单了”，于是在师父川爷面前放肆了一把：“我觉得 Python 是世界上最简单的语言！”。于是川爷嘴角闪过了一丝轻蔑的微笑（内心 OS：Naive！，作为一个 Python 开发者，我必须要给你一点人生经验，不然你不知道天高地厚！）于是川爷给我了一份满分 100 分的题，然后这篇文章就是记录下做这套题所踩过的坑。"><meta property=og:locale content=en_US><meta property=og:image content=https://cdn.pixabay.com/photo/2023/02/06/01/14/superb-fairywren-7770904_1280.jpg><meta property=article:published_time content=2016-11-18T14:37:43.000Z><meta property=article:modified_time content=2024-10-20T19:10:05.628Z><meta property=article:author content=Manjusaka><meta property=article:tag content=编程><meta property=article:tag content=Python><meta property=article:tag content=黑魔法><meta property=article:tag content=编程技巧><meta name=twitter:card content=summary><meta name=twitter:image content="https://avatars.githubusercontent.com/u/7054676?v=4"><meta name=twitter:creator content=@Manjusaka_Lee><meta name=twitter:site content=https://twitter.com/Manjusaka_Lee><link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/7054676?v=4"><link rel=canonical href=https://www.manjusaka.blog/posts/2016/11/18/Someone-tell-me-that-you-think-Python-is-simple/index.html><link rel=preconnect href=//cdn.jsdelivr.net><link rel=preconnect href=//www.google-analytics.com crossorigin=""><link rel=preconnect href=//busuanzi.ibruce.info><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css media=print onload='this.media="all"'><script>(()=>{let t={set:(e,t,a)=>{a&&(a=Date.now()+864e5*a,localStorage.setItem(e,JSON.stringify({value:t,expiry:a})))},get:e=>{var t=localStorage.getItem(e);if(t){var{value:t,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return t;localStorage.removeItem(e)}}},a=(window.btf={saveToLocal:t,getScript:(o,r={})=>new Promise((e,t)=>{let a=document.createElement("script");a.src=o,a.async=!0,Object.entries(r).forEach(([e,t])=>a.setAttribute(e,t)),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||e()},a.onerror=t,document.head.appendChild(a)}),getCSS:(o,r)=>new Promise((e,t)=>{let a=document.createElement("link");a.rel="stylesheet",a.href=o,r&&(a.id=r),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||e()},a.onerror=t,document.head.appendChild(a)}),addGlobalFn:(e,t,a=!1,o=window)=>{var r;e.startsWith("pjax")||((r=o.globalFn||{})[e]=r[e]||{},a&&r[e][a])||(r[e][a||Object.keys(r[e]).length]=t,o.globalFn=r)}},()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")}),o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};btf.activateDarkMode=a,btf.activateLightMode=o;var r=t.get("theme"),n=window.matchMedia("(prefers-color-scheme: dark)"),d=window.matchMedia("(prefers-color-scheme: light)"),d=(void 0===r?((!d.matches&&(n.matches||(d=(new Date).getHours())<=6||18<=d)?a:o)(),n.addEventListener("change",()=>{void 0===t.get("theme")&&(e.matches?a:o)()})):("light"===r?o:a)(),t.get("aside-status"));void 0!==d&&document.documentElement.classList.toggle("hide-aside","hide"===d);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script async=async src="https://www.googletagmanager.com/gtag/js?id=UA-154407994-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-154407994-1"),btf.addGlobalFn("pjaxComplete",()=>{gtag("config","UA-154407994-1",{page_path:window.location.pathname})},"google_analytics")</script><script>let GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!1,highlightMacStyle:!1},copy:{success:"Copy Successful",error:"Copy Failed",noSupport:"Browser Not Supported"},relativeDate:{homepage:!0,post:!0},runtime:"",dateSuffix:{just:"Just now",min:"minutes ago",hour:"hours ago",day:"days ago",month:"months ago"},copyright:{limitCount:100,languages:{author:"Author: Manjusaka",link:"Link: ",source:"Source: Manjusaka",info:"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},lightbox:"null",Snackbar:{chs_to_cht:"You have switched to Traditional Chinese",cht_to_chs:"You have switched to Simplified Chinese",day_to_night:"You have switched to Dark Mode",night_to_day:"You have switched to Light Mode",bgLight:"#59C173",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"Load More"},isPhotoFigcaption:!0,islazyload:!0,isAnchor:!0,percent:{toc:!0,rightside:!0},autoDarkmode:!0}</script><script id=config-diff>var GLOBAL_CONFIG_SITE={title:"听说你会 Python ？",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-10-21 03:10:05"}</script><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css media=print onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css media=defer onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css media=defer onload='this.media="all"'><script src=https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js></script><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title=Manjusaka type=application/atom+xml></head><body><div id=loading-box><div class=loading-left-bg></div><div class=loading-right-bg></div><div class=spinner-box><div class=configure-border-1><div class=configure-core></div></div><div class=configure-border-2><div class=configure-core></div></div><div class=loading-word>Loading...</div></div></div><script>(()=>{let e=document.getElementById("loading-box"),d=document.body;const o=()=>{d.style.overflow="",e.classList.add("loaded")},l=()=>{d.style.overflow="hidden",e.classList.remove("loaded")};l(),window.addEventListener("load",o)})()</script><div id=web_bg style="background-image:url('url(https://cdn.jsdelivr.net/gh/youngjuning/images@main/1680450445599.png)')"></div><div id=sidebar><div id=menu-mask></div><div id=sidebar-menus><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/7054676?v=4" onerror='onerror=null,src="/img/friend_404.gif"' alt=avatar></div><div class="site-data text-center"><a href=/archives/ ><div class=headline>Articles</div><div class=length-num>95</div></a><a href=/tags/ ><div class=headline>Tags</div><div class=length-num>58</div></a><a href=/categories/ ><div class=headline>Categories</div><div class=length-num>38</div></a></div><div class=menus_items><div class=menus_item><a class=site-page href=/ ><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class=menus_item><span class="site-page group"><i class="fa-fw fa-fw fas fa-lines-leaning"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class=menus_item_child><li><a class="site-page child" href=/categories/ ><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href=/tags/ ><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href=/archives/ ><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href=/random/ ><i class="fa-fw fas fa-random"></i><span> 随便逛逛</span></a></li></ul></div><div class=menus_item><a class=site-page href=/weekly/ ><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></div><div class=menus_item><a class=site-page href=/leetcode/ ><i class="fa-fw fas fa-newspaper"></i><span> 刷题</span></a></div><div class=menus_item><span class="site-page group"><i class="fa-fw fas fa-heart"></i><span> 我的</span><i class="fas fa-chevron-down"></i></span><ul class=menus_item_child><li><a class="site-page child" href=/about/ ><i class="fa-fw fas fa-spa"></i><span> 关于</span></a></li><li><a class="site-page child" href=/weekly/ ><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></li></ul></div></div></div></div><div class="post type-tags" id=body-wrap><header class=post-bg id=page-header style=background-image:url(https://cdn.pixabay.com/photo/2023/02/06/01/14/superb-fairywren-7770904_1280.jpg)><nav id=nav><span id=blog-info><a class=nav-site-title href=/ ><img class=site-icon src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/7054676?v=4# image" alt=Logo><span class=site-name>Manjusaka</span></a><a class=nav-page-title href=/ ><span class=site-name>听说你会 Python ？</span></a></span><div id=menus><div class=menus_items><div class=menus_item><a class=site-page href=/ ><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class=menus_item><span class="site-page group"><i class="fa-fw fa-fw fas fa-lines-leaning"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class=menus_item_child><li><a class="site-page child" href=/categories/ ><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href=/tags/ ><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href=/archives/ ><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href=/random/ ><i class="fa-fw fas fa-random"></i><span> 随便逛逛</span></a></li></ul></div><div class=menus_item><a class=site-page href=/weekly/ ><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></div><div class=menus_item><a class=site-page href=/leetcode/ ><i class="fa-fw fas fa-newspaper"></i><span> 刷题</span></a></div><div class=menus_item><span class="site-page group"><i class="fa-fw fas fa-heart"></i><span> 我的</span><i class="fas fa-chevron-down"></i></span><ul class=menus_item_child><li><a class="site-page child" href=/about/ ><i class="fa-fw fas fa-spa"></i><span> 关于</span></a></li><li><a class="site-page child" href=/weekly/ ><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></li></ul></div></div><div id=toggle-menu><span class=site-page><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id=post-info><h1 class=post-title>听说你会 Python ？<a class=post-edit-link href=https://github.com/Zheaoli/Zheaoli.github.io/edit/main/source/_posts/Someone-tell-me-that-you-think-Python-is-simple.md rel="external nofollow noreferrer" title=Edit target=_blank><i class="fas fa-pencil-alt"></i></a></h1><div id=post-meta><div class=meta-firstline><span class=post-meta-date><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class=post-meta-label>Created</span><time datetime=2016-11-18T14:37:43.000Z title="Created 2016-11-18 22:37:43">2016-11-18</time></span><span class=post-meta-categories><span class=post-meta-separator>|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class=post-meta-categories href=/categories/%E7%BC%96%E7%A8%8B/ >编程</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class=post-meta-categories href=/categories/%E7%BC%96%E7%A8%8B/Python/ >Python</a></span></div><div class=meta-secondline><span class=post-meta-separator>|</span><span class=post-meta-wordcount><i class="far fa-file-word fa-fw post-meta-icon"></i><span class=post-meta-label>Word Count:</span><span class=word-count>3.2k</span><span class=post-meta-separator>|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class=post-meta-label>Reading Time:</span><span>12mins</span></span><span class=post-meta-separator>|</span><span class=post-meta-pv-cv id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class=post-meta-label>Post Views:</span><span id=busuanzi_value_page_pv><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class=layout id=content-inner><div id=post><article class=post-content id=article-container><h2 id=前言><a href=#前言 class=headerlink title=前言></a>前言</h2><p>最近觉得 Python 太“简单了”，于是在师父川爷面前放肆了一把：“我觉得 Python 是世界上最简单的语言！”。于是川爷嘴角闪过了一丝轻蔑的微笑（内心 OS：Naive！，作为一个 Python 开发者，我必须要给你一点人生经验，不然你不知道天高地厚！）于是川爷给我了一份满分 100 分的题，然后这篇文章就是记录下做这套题所踩过的坑。<br><span id=more></span></p><h2 id=1-列表生成器><a href=#1-列表生成器 class=headerlink title=1.列表生成器></a>1.列表生成器</h2><h3 id=描述><a href=#描述 class=headerlink title=描述></a>描述</h3><p>下面的代码会报错，为什么？</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    x = <span class=number>1</span></span><br><span class=line>    gen = (x <span class=keyword>for</span> _ <span class=keyword>in</span> xrange(<span class=number>10</span>))  <span class=comment># gen=(x for _ in range(10))</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>if</span> __name__ == <span class=string>&quot;__main__&quot;</span>:</span><br><span class=line>    <span class=built_in>print</span>(<span class=built_in>list</span>(A.gen))</span><br></pre></td></tr></table></figure><h3 id=答案><a href=#答案 class=headerlink title=答案></a>答案</h3><p>这个问题是变量作用域问题，在 <code>gen=(x for _ in xrange(10))</code> 中 <code>gen</code> 是一个 <code>generator</code> ,在 <code>generator</code> 中变量有自己的一套作用域，与其余作用域空间相互隔离。因此，将会出现这样的 <code>NameError: name &#39;x&#39; is not defined</code> 的问题，那么解决方案是什么呢？答案是：用 lambda 。</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    x = <span class=number>1</span></span><br><span class=line>    gen = (<span class=keyword>lambda</span> x: (x <span class=keyword>for</span> _ <span class=keyword>in</span> xrange(<span class=number>10</span>)))(x)  <span class=comment># gen=(x for _ in range(10))</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>if</span> __name__ == <span class=string>&quot;__main__&quot;</span>:</span><br><span class=line>    <span class=built_in>print</span>(<span class=built_in>list</span>(A.gen))</span><br><span class=line></span><br></pre></td></tr></table></figure><p>或者这样</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    x = <span class=number>1</span></span><br><span class=line>    gen = (A.x <span class=keyword>for</span> _ <span class=keyword>in</span> xrange(<span class=number>10</span>))  <span class=comment># gen=(x for _ in range(10))</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>if</span> __name__ == <span class=string>&quot;__main__&quot;</span>:</span><br><span class=line>    <span class=built_in>print</span>(<span class=built_in>list</span>(A.gen))</span><br></pre></td></tr></table></figure><h3 id=补充><a href=#补充 class=headerlink title=补充></a>补充</h3><p>感谢评论区几位提出的意见，这里我给一份官方文档的说明吧：<br>The scope of names defined in a class block is limited to the class block; it does not extend to the code blocks of methods – this includes comprehensions and generator expressions since they are implemented using a function scope. This means that the following will fail:</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">A</span>:</span><br><span class=line>    a = <span class=number>42</span></span><br><span class=line>    b = <span class=built_in>list</span>(a + i <span class=keyword>for</span> i <span class=keyword>in</span> <span class=built_in>range</span>(<span class=number>10</span>))</span><br></pre></td></tr></table></figure><p>参考链接 <a target=_blank rel="noopener external nofollow noreferrer" href=https://docs.python.org/2/reference/executionmodel.html#naming-and-binding>Python2 Execution-Model:Naming-and-Binding</a> ， <a target=_blank rel="noopener external nofollow noreferrer" href=https://docs.python.org/3/reference/executionmodel.html#resolution-of-name>Python3 Execution-Model:Resolution-of-Names</a>。据说这是 PEP 227 中新增的提案，我回去会进一步详细考证。再次拜谢评论区 @没头脑很着急 @涂伟忠 @Cholerae 三位的勘误指正。</p><h2 id=2-装饰器><a href=#2-装饰器 class=headerlink title=2.装饰器></a>2.装饰器</h2><h3 id=描述-1><a href=#描述-1 class=headerlink title=描述></a>描述</h3><p>我想写一个类装饰器用来度量函数/方法运行时间</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>import</span> time</span><br><span class=line></span><br><span class=line><span class=keyword>class</span> <span class="title class_">Timeit</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self, func</span>):</span><br><span class=line>        <span class="variable language_">self</span>._wrapped = func</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__call__</span>(<span class=params>self, *args, **kws</span>):</span><br><span class=line>        start_time = time.time()</span><br><span class=line>        result = <span class="variable language_">self</span>._wrapped(*args, **kws)</span><br><span class=line>        <span class=built_in>print</span>(<span class=string>&quot;elapsed time is %s &quot;</span> % (time.time() - start_time))</span><br><span class=line>        <span class=keyword>return</span> result</span><br></pre></td></tr></table></figure><p>这个装饰器能够运行在普通函数上：<br></p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=meta>@Timeit</span></span><br><span class=line><span class=keyword>def</span> <span class="title function_">func</span>():</span><br><span class=line>    time.sleep(<span class=number>1</span>)</span><br><span class=line>    <span class=keyword>return</span> <span class=string>&quot;invoking function func&quot;</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>if</span> __name__ == <span class=string>&#x27;__main__&#x27;</span>:</span><br><span class=line>    func()  <span class=comment># output: elapsed time is 1.00044410133</span></span><br></pre></td></tr></table></figure><p></p><p>但是运行在方法上会报错，为什么？</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line><span class=meta>    @Timeit</span></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">func</span>(<span class=params>self</span>):</span><br><span class=line>        time.sleep(<span class=number>1</span>)</span><br><span class=line>        <span class=keyword>return</span> <span class=string>&#x27;invoking method func&#x27;</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>if</span> __name__ == <span class=string>&#x27;__main__&#x27;</span>:</span><br><span class=line>    a = A()</span><br><span class=line>    a.func()  <span class=comment># Boom!</span></span><br><span class=line></span><br></pre></td></tr></table></figure><p>如果我坚持使用类装饰器，应该如何修改？</p><h3 id=答案-1><a href=#答案-1 class=headerlink title=答案></a>答案</h3><p>使用类装饰器后，在调用 <code>func</code> 函数的过程中其对应的 instance 并不会传递给 <code>__call__</code> 方法，造成其 <code>mehtod unbound</code> ,那么解决方法是什么呢？描述符赛高</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">Timeit</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self, func</span>):</span><br><span class=line>        <span class="variable language_">self</span>.func = func</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__call__</span>(<span class=params>self, *args, **kwargs</span>):</span><br><span class=line>        <span class=built_in>print</span>(<span class=string>&#x27;invoking Timer&#x27;</span>)</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__get__</span>(<span class=params>self, instance, owner</span>):</span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>lambda</span> *args, **kwargs: <span class="variable language_">self</span>.func(instance, *args, **kwargs)</span><br></pre></td></tr></table></figure><h2 id=3-Python-调用机制><a href=#3-Python-调用机制 class=headerlink title="3.Python 调用机制"></a>3.Python 调用机制</h2><h3 id=描述-2><a href=#描述-2 class=headerlink title=描述></a>描述</h3><p>我们知道 <code>__call__</code> 方法可以用来重载圆括号调用，好的，以为问题就这么简单？Naive！</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__call__</span>(<span class=params>self</span>):</span><br><span class=line>        <span class=built_in>print</span>(<span class=string>&quot;invoking __call__ from A!&quot;</span>)</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>if</span> __name__ == <span class=string>&quot;__main__&quot;</span>:</span><br><span class=line>    a = A()</span><br><span class=line>    a()  <span class=comment># output: invoking __call__ from A</span></span><br></pre></td></tr></table></figure><p>现在我们可以看到 <code>a()</code> 似乎等价于 <code>a.__call__()</code> ,看起来很 Easy 对吧，好的，我现在想作死，又写出了如下的代码，</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line>a.__call__ = <span class=keyword>lambda</span>: <span class=string>&quot;invoking __call__ from lambda&quot;</span></span><br><span class=line>a.__call__()</span><br><span class=line><span class=comment># output:invoking __call__ from lambda</span></span><br><span class=line>a()</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=comment># output:invoking __call__ from A!</span></span><br></pre></td></tr></table></figure><p>请大佬们解释下，为什么 <code>a()</code> 没有调用出 <code>a.__call__()</code> (此题由 USTC 王子博前辈提出)</p><h3 id=答案-2><a href=#答案-2 class=headerlink title=答案></a>答案</h3><p>原因在于，在 Python 中，新式类（ new class )的内建特殊方法，和实例的属性字典是相互隔离的，具体可以看看 Python 官方<a target=_blank rel="noopener external nofollow noreferrer" href=https://docs.python.org/2/reference/datamodel.html#special-method-lookup-for-new-style-classes>文档</a>对于这一情况的说明</p><blockquote><p>For new-style classes, implicit invocations of special methods are only guaranteed to work correctly if defined on an object’s type, not in the object’s instance dictionary. That behaviour is the reason why the following code raises an exception (unlike the equivalent example with old-style classes):</p></blockquote><p>同时官方也给出了一个例子：</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    <span class=keyword>pass</span></span><br><span class=line></span><br><span class=line></span><br><span class=line>c = C()</span><br><span class=line>c.__len__ = <span class=keyword>lambda</span>: <span class=number>5</span></span><br><span class=line><span class=built_in>len</span>(c)</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=comment># Traceback (most recent call last):</span></span><br><span class=line><span class=comment>#  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></span><br><span class=line><span class=comment># TypeError: object of type &#x27;C&#x27; has no len()</span></span><br></pre></td></tr></table></figure><p>回到我们的例子上来，当我们在执行 <code>a.__call__=lambda:&quot;invoking __call__ from lambda&quot;</code> 时，的确在我们在 <code>a.__dict__</code> 中新增加了一个 key 为 <code>__call__</code> 的 item，但是当我们执行 <code>a()</code> 时，因为涉及特殊方法的调用，因此我们的调用过程不会从 <code>a.__dict__</code> 中寻找属性，而是从 <code>tyee(a).__dict__</code> 中寻找属性。因此，就会出现如上所述的情况。</p><h2 id=4-描述符><a href=#4-描述符 class=headerlink title=4.描述符></a>4.描述符</h2><h3 id=描述-3><a href=#描述-3 class=headerlink title=描述></a>描述</h3><p>我想写一个 Exam 类，其属性 math 为 [0,100] 的整数，若赋值时不在此范围内则抛出异常，我决定用描述符来实现这个需求。</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">Grade</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self</span>):</span><br><span class=line>        <span class="variable language_">self</span>._score = <span class=number>0</span></span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__get__</span>(<span class=params>self, instance, owner</span>):</span><br><span class=line>        <span class=keyword>return</span> <span class="variable language_">self</span>._score</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__set__</span>(<span class=params>self, instance, value</span>):</span><br><span class=line>        <span class=keyword>if</span> <span class=number>0</span> &lt;= value &lt;= <span class=number>100</span>:</span><br><span class=line>            <span class="variable language_">self</span>._score = value</span><br><span class=line>        <span class=keyword>else</span>:</span><br><span class=line>            <span class=keyword>raise</span> ValueError(<span class=string>&#x27;grade must be between 0 and 100&#x27;</span>)</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>class</span> <span class="title class_">Exam</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    math = Grade()</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self, math</span>):</span><br><span class=line>        <span class="variable language_">self</span>.math = math</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>if</span> __name__ == <span class=string>&#x27;__main__&#x27;</span>:</span><br><span class=line>    niche = Exam(math=<span class=number>90</span>)</span><br><span class=line>    <span class=built_in>print</span>(niche.math)</span><br><span class=line>    <span class=comment># output : 90</span></span><br><span class=line>    snake = Exam(math=<span class=number>75</span>)</span><br><span class=line>    <span class=built_in>print</span>(snake.math)</span><br><span class=line>    <span class=comment># output : 75</span></span><br><span class=line>    snake.math = <span class=number>120</span></span><br><span class=line>    <span class=comment># output: ValueError:grade must be between 0 and 100!</span></span><br></pre></td></tr></table></figure><p>看起来一切正常。不过这里面有个巨大的问题，尝试说明是什么问题<br>为了解决这个问题，我改写了 Grade 描述符如下：</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">Grad</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self</span>):</span><br><span class=line>        <span class="variable language_">self</span>._grade_pool = &#123;&#125;</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__get__</span>(<span class=params>self, instance, owner</span>):</span><br><span class=line>        <span class=keyword>return</span> <span class="variable language_">self</span>._grade_pool.get(instance, <span class=literal>None</span>)</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__set__</span>(<span class=params>self, instance, value</span>):</span><br><span class=line>        <span class=keyword>if</span> <span class=number>0</span> &lt;= value &lt;= <span class=number>100</span>:</span><br><span class=line>            _grade_pool = <span class="variable language_">self</span>.__dict__.setdefault(<span class=string>&#x27;_grade_pool&#x27;</span>, &#123;&#125;)</span><br><span class=line>            _grade_pool[instance] = value</span><br><span class=line>        <span class=keyword>else</span>:</span><br><span class=line>            <span class=keyword>raise</span> ValueError(<span class=string>&quot;fuck&quot;</span>)</span><br></pre></td></tr></table></figure><p>不过这样会导致更大的问题，请问该怎么解决这个问题？</p><h3 id=答案-3><a href=#答案-3 class=headerlink title=答案></a>答案</h3><p>1.第一个问题的其实很简单，如果你再运行一次 <code>print(niche.math)</code> 你就会发现，输出值是 <code>75</code> ，那么这是为什么呢？这就要先从 Python 的调用机制说起了。我们如果调用一个属性，那么其顺序是优先从实例的 <code>__dict__</code> 里查找，然后如果没有查找到的话，那么一次查询类字典，父类字典，直到彻底查不到为止。好的，现在回到我们的问题，我们发现，在我们的类 <code>Exam</code> 中，其 <code>self.math</code> 的调用过程是，首先在实例化后的实例的 <code>__dict__</code> 中进行查找，没有找到，接着往上一级，在我们的类 <code>Exam</code> 中进行查找，好的找到了，返回。那么这意味着，我们对于 <code>self.math</code> 的所有操作都是对于类变量 <code>math</code> 的操作。因此造成变量污染的问题。那么该则怎么解决呢？很多同志可能会说，恩，在 <code>__set__</code> 函数中将值设置到具体的实例字典不就行了。<br>那么这样可不可以呢？答案是，很明显不得行啊，至于为什么，就涉及到我们 Python 描述符的机制了，描述符指的是实现了描述符协议的特殊的类，三个描述符协议指的是 <code>__get__</code> , ‘<strong>set</strong>‘ , <code>__delete__</code> 以及 Python 3.6 中新增的 <code>__set_name__</code> 方法，其中实现了 <code>__get__</code> 以及 <code>__set__</code> / <code>__delete__</code> / <code>__set_name__</code> 的是 <strong>Data descriptors</strong> ，而只实现了 <code>__get__</code> 的是 <code>Non-Data descriptor</code> 。那么有什么区别呢，前面说了， <strong>我们如果调用一个属性，那么其顺序是优先从实例的 <code>__dict__</code> 里查找，然后如果没有查找到的话，那么一次查询类字典，父类字典，直到彻底查不到为止。</strong> 但是，这里没有考虑描述符的因素进去，如果将描述符因素考虑进去，那么正确的表述应该是<strong>我们如果调用一个属性，那么其顺序是优先从实例的 <code>__dict__</code> 里查找，然后如果没有查找到的话，那么一次查询类字典，父类字典，直到彻底查不到为止。其中如果在类实例字典中的该属性是一个 <code>Data descriptors</code> ，那么无论实例字典中存在该属性与否，无条件走描述符协议进行调用，在类实例字典中的该属性是一个 <code>Non-Data descriptors</code> ，那么优先调用实例字典中的属性值而不触发描述符协议，如果实例字典中不存在该属性值，那么触发 <code>Non-Data descriptor</code> 的描述符协议</strong>。回到之前的问题，我们即使在 <code>__set__</code> 将具体的属性写入实例字典中，但是由于类字典中存在着 <code>Data descriptors</code> ，因此，我们在调用 <code>math</code> 属性时，依旧会触发描述符协议。</p><p>2.经过改良的做法，利用 <code>dict</code> 的 key 唯一性，将具体的值与实例进行绑定，但是同时带来了内存泄露的问题。那么为什么会造成内存泄露呢，首先复习下我们的 <code>dict</code> 的特性，<code>dict</code> 最重要的一个特性，就是凡可 hash 的对象皆可为 key ，<code>dict</code> 通过利用的 hash 值的唯一性（严格意义上来讲并不是唯一，而是其 hash 值碰撞几率极小，近似认定其唯一）来保证 key 的不重复性，同时（敲黑板，重点来了），<code>dict</code> 中的 <code>key</code> 引用是强引用类型，会造成对应对象的引用计数的增加，可能造成对象无法被 gc ，从而产生内存泄露。那么这里该怎么解决呢？两种方法<br>第一种：</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">Grad</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self</span>):</span><br><span class=line>        <span class=keyword>import</span> weakref</span><br><span class=line>        <span class="variable language_">self</span>._grade_pool = weakref.WeakKeyDictionary()</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__get__</span>(<span class=params>self, instance, owner</span>):</span><br><span class=line>        <span class=keyword>return</span> <span class="variable language_">self</span>._grade_pool.get(instance, <span class=literal>None</span>)</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__set__</span>(<span class=params>self, instance, value</span>):</span><br><span class=line>        <span class=keyword>if</span> <span class=number>0</span> &lt;= value &lt;= <span class=number>100</span>:</span><br><span class=line>            _grade_pool = <span class="variable language_">self</span>.__dict__.setdefault(<span class=string>&#x27;_grade_pool&#x27;</span>, &#123;&#125;)</span><br><span class=line>            _grade_pool[instance] = value</span><br><span class=line>        <span class=keyword>else</span>:</span><br><span class=line>            <span class=keyword>raise</span> ValueError(<span class=string>&quot;fuck&quot;</span>)</span><br></pre></td></tr></table></figure><p>weakref 库中的 <code>WeakKeyDictionary</code> 所产生的字典的 key 对于对象的引用是弱引用类型，其不会造成内存引用计数的增加，因此不会造成内存泄露。同理，如果我们为了避免 value 对于对象的强引用，我们可以使用 <code>WeakValueDictionary</code> 。<br>第二种：在 Python 3.6 中，实现的 PEP 487 提案，为描述符新增加了一个协议，我们可以用其来绑定对应的对象：</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">Grad</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__get__</span>(<span class=params>self, instance, owner</span>):</span><br><span class=line>        <span class=keyword>return</span> instance.__dict__[<span class="variable language_">self</span>.key]</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__set__</span>(<span class=params>self, instance, value</span>):</span><br><span class=line>        <span class=keyword>if</span> <span class=number>0</span> &lt;= value &lt;= <span class=number>100</span>:</span><br><span class=line>            instance.__dict__[<span class="variable language_">self</span>.key] = value</span><br><span class=line>        <span class=keyword>else</span>:</span><br><span class=line>            <span class=keyword>raise</span> ValueError(<span class=string>&quot;fuck&quot;</span>)</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__set_name__</span>(<span class=params>self, owner, name</span>):</span><br><span class=line>        <span class="variable language_">self</span>.key = name</span><br></pre></td></tr></table></figure><p>这道题涉及的东西比较多，这里给出一点参考链接，<a target=_blank rel="noopener external nofollow noreferrer" href=https://docs.python.org/2/reference/datamodel.html#invoking-descriptors>invoking-descriptors</a> , <a target=_blank rel="noopener external nofollow noreferrer" href=https://docs.python.org/3/howto/descriptor.html>Descriptor HowTo Guide</a> , <a target=_blank rel="noopener external nofollow noreferrer" href=https://www.python.org/dev/peps/pep-0487/ >PEP 487</a> , <a target=_blank rel="noopener external nofollow noreferrer" href=https://docs.python.org/3.6/whatsnew/3.6.html#pep-487-descriptor-protocol-enhancements>what`s new in Python 3.6</a> 。</p><h2 id=5-Python-继承机制><a href=#5-Python-继承机制 class=headerlink title="5.Python 继承机制"></a>5.Python 继承机制</h2><h3 id=描述-4><a href=#描述-4 class=headerlink title=描述></a>描述</h3><p>试求出以下代码的输出结果。</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">Init</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self, value</span>):</span><br><span class=line>        <span class="variable language_">self</span>.val = value</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>class</span> <span class="title class_">Add2</span>(<span class="title class_ inherited__">Init</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self, val</span>):</span><br><span class=line>        <span class=built_in>super</span>(Add2, <span class="variable language_">self</span>).__init__(val)</span><br><span class=line>        <span class="variable language_">self</span>.val += <span class=number>2</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>class</span> <span class="title class_">Mul5</span>(<span class="title class_ inherited__">Init</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self, val</span>):</span><br><span class=line>        <span class=built_in>super</span>(Mul5, <span class="variable language_">self</span>).__init__(val)</span><br><span class=line>        <span class="variable language_">self</span>.val *= <span class=number>5</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>class</span> <span class="title class_">Pro</span>(Mul5, Add2):</span><br><span class=line>    <span class=keyword>pass</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>class</span> <span class="title class_">Incr</span>(<span class="title class_ inherited__">Pro</span>):</span><br><span class=line>    csup = <span class=built_in>super</span>(Pro)</span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>self, val</span>):</span><br><span class=line>        <span class="variable language_">self</span>.csup.__init__(val)</span><br><span class=line>        <span class="variable language_">self</span>.val += <span class=number>1</span></span><br><span class=line></span><br><span class=line></span><br><span class=line>p = Incr(<span class=number>5</span>)</span><br><span class=line><span class=built_in>print</span>(p.val)</span><br></pre></td></tr></table></figure><h3 id=答案-4><a href=#答案-4 class=headerlink title=答案></a>答案</h3><p>输出是 36 ，具体可以参考 <a target=_blank rel="noopener external nofollow noreferrer" href=https://www.python.org/doc/newstyle/ >New-style Classes</a> , <a target=_blank rel="noopener external nofollow noreferrer" href=https://docs.python.org/2/tutorial/classes.html#multiple-inheritance>multiple-inheritance</a></p><h2 id=6-Python-特殊方法><a href=#6-Python-特殊方法 class=headerlink title="6. Python 特殊方法"></a>6. Python 特殊方法</h2><h3 id=描述-5><a href=#描述-5 class=headerlink title=描述></a>描述</h3><p>我写了一个通过重载 <strong>new</strong> 方法来实现单例模式的类。</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">Singleton</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    _instance = <span class=literal>None</span></span><br><span class=line></span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__new__</span>(<span class=params>cls, *args, **kwargs</span>):</span><br><span class=line>        <span class=keyword>if</span> cls._instance:</span><br><span class=line>            <span class=keyword>return</span> cls._instance</span><br><span class=line>        cls._isntance = cv = <span class=built_in>object</span>.__new__(cls, *args, **kwargs)</span><br><span class=line>        <span class=keyword>return</span> cv</span><br><span class=line></span><br><span class=line></span><br><span class=line>sin1 = Singleton()</span><br><span class=line>sin2 = Singleton()</span><br><span class=line><span class=built_in>print</span>(sin1 <span class=keyword>is</span> sin2)</span><br><span class=line><span class=comment># output: True</span></span><br></pre></td></tr></table></figure><p>现在我有一堆类要实现为单例模式，所以我打算照葫芦画瓢写一个元类，这样可以让代码复用：</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">SingleMeta</span>(<span class="title class_ inherited__">type</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>cls, name, bases, <span class=built_in>dict</span></span>):</span><br><span class=line>        cls._instance = <span class=literal>None</span></span><br><span class=line>        __new__o = cls.__new__</span><br><span class=line></span><br><span class=line>        <span class=keyword>def</span> <span class="title function_">__new__</span>(<span class=params>cls, *args, **kwargs</span>):</span><br><span class=line>            <span class=keyword>if</span> cls._instance:</span><br><span class=line>                <span class=keyword>return</span> cls._instance</span><br><span class=line>            cls._instance = cv = __new__o(cls, *args, **kwargs)</span><br><span class=line>            <span class=keyword>return</span> cv</span><br><span class=line></span><br><span class=line>        cls.__new__ = __new__</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    __metaclass__ = SingleMeta</span><br><span class=line></span><br><span class=line></span><br><span class=line>a1 = A()  <span class=comment># what`s the fuck</span></span><br></pre></td></tr></table></figure><p>哎呀，好气啊，为啥这会报错啊，我明明之前用这种方法给 <code>__getattribute__</code> 打补丁的，下面这段代码能够捕获一切属性调用并打印参数</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">TraceAttribute</span>(<span class="title class_ inherited__">type</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>cls, name, bases, <span class=built_in>dict</span></span>):</span><br><span class=line>        __getattribute__o = cls.__getattribute__</span><br><span class=line></span><br><span class=line>        <span class=keyword>def</span> <span class="title function_">__getattribute__</span>(<span class=params>self, *args, **kwargs</span>):</span><br><span class=line>            <span class=built_in>print</span>(<span class=string>&#x27;__getattribute__:&#x27;</span>, args, kwargs)</span><br><span class=line>            <span class=keyword>return</span> __getattribute__o(<span class="variable language_">self</span>, *args, **kwargs)</span><br><span class=line></span><br><span class=line>        cls.__getattribute__ = __getattribute__</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):  <span class=comment># Python 3 是 class A(object,metaclass=TraceAttribute):</span></span><br><span class=line>    __metaclass__ = TraceAttribute</span><br><span class=line>    a = <span class=number>1</span></span><br><span class=line>    b = <span class=number>2</span></span><br><span class=line></span><br><span class=line></span><br><span class=line>a = A()</span><br><span class=line>a.a</span><br><span class=line><span class=comment># output: __getattribute__:(&#x27;a&#x27;,)&#123;&#125;</span></span><br><span class=line>a.b</span><br></pre></td></tr></table></figure><p>试解释为什么给 <strong>getattribute</strong> 打补丁成功，而 <strong>new</strong> 打补丁失败。<br>如果我坚持使用元类给 <strong>new</strong> 打补丁来实现单例模式，应该怎么修改？</p><h3 id=答案-5><a href=#答案-5 class=headerlink title=答案></a>答案</h3><p>其实这是最气人的一点，类里的 <code>__new__</code> 是一个 <code>staticmethod</code> 因此替换的时候必须以 <code>staticmethod</code> 进行替换。答案如下：</p><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">SingleMeta</span>(<span class="title class_ inherited__">type</span>):</span><br><span class=line>    <span class=keyword>def</span> <span class="title function_">__init__</span>(<span class=params>cls, name, bases, <span class=built_in>dict</span></span>):</span><br><span class=line>        cls._instance = <span class=literal>None</span></span><br><span class=line>        __new__o = cls.__new__</span><br><span class=line></span><br><span class=line><span class=meta>        @staticmethod</span></span><br><span class=line>        <span class=keyword>def</span> <span class="title function_">__new__</span>(<span class=params>cls, *args, **kwargs</span>):</span><br><span class=line>            <span class=keyword>if</span> cls._instance:</span><br><span class=line>                <span class=keyword>return</span> cls._instance</span><br><span class=line>            cls._instance = cv = __new__o(cls, *args, **kwargs)</span><br><span class=line>            <span class=keyword>return</span> cv</span><br><span class=line></span><br><span class=line>        cls.__new__ = __new__</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class=line>    __metaclass__ = SingleMeta</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=built_in>print</span>(A() <span class=keyword>is</span> A())  <span class=comment># output: True</span></span><br></pre></td></tr></table></figure><h2 id=结语><a href=#结语 class=headerlink title=结语></a>结语</h2><p>感谢师父大人的一套题让我开启新世界的大门，恩，博客上没法艾特，只能传递心意了。说实话 Python 的动态特性可以让其用众多 <code>black magic</code> 去实现一些很舒服的功能，当然这也对我们对语言特性及坑的掌握也变得更严格了，愿各位 Pythoner 没事阅读官方文档，早日达到<strong>装逼如风，常伴吾身</strong>的境界。</p></article><div class=post-copyright><div class=post-copyright__author><span class=post-copyright-meta><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class=post-copyright-info><a target=_blank rel="noopener external nofollow noreferrer" href=https://github.com/Zheaoli>Manjusaka</a></span></div><div class=post-copyright__type><span class=post-copyright-meta><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class=post-copyright-info><a href=https://www.manjusaka.blog/posts/2016/11/18/Someone-tell-me-that-you-think-Python-is-simple/ >https://www.manjusaka.blog/posts/2016/11/18/Someone-tell-me-that-you-think-Python-is-simple/</a></span></div><div class=post-copyright__notice><span class=post-copyright-meta><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class=post-copyright-info>All articles on this blog are licensed under <a target=_blank rel="noopener external nofollow noreferrer" href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/%E7%BC%96%E7%A8%8B/ >编程</a><a class=post-meta__tags href=/tags/Python/ >Python</a><a class=post-meta__tags href=/tags/%E9%BB%91%E9%AD%94%E6%B3%95/ >黑魔法</a><a class=post-meta__tags href=/tags/%E7%BC%96%E7%A8%8B%E6%8A%80%E5%B7%A7/ >编程技巧</a></div><div class=post-share><div class=social-share data-image=https://cdn.pixabay.com/photo/2023/02/06/01/14/superb-fairywren-7770904_1280.jpg data-sites=facebook,twitter,wechat,weibo,qq></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css media=print onload='this.media="all"'><script src=https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js defer=defer></script></div></div><div class=ads-wrap><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-7962287588031867 data-ad-slot=2542544532></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><nav class=pagination-post id=pagination><a class=pagination-related href=/posts/2016/12/15/A-Simple-Object-Model/ title="用 Python 实现一个最简单的对象模型"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/38/cherry-blossoms-7766588_1280.jpg onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class=info><div class=info-1><div class=info-item-1>Previous</div><div class=info-item-2>用 Python 实现一个最简单的对象模型</div></div><div class=info-2><div class=info-item-1>原文地址：A Simple Object Model 原文作者：Carl Friedrich Bolz 译文出自：掘金翻译计划 译者：Zheaoli 校对者：Yuze Ma, Gran 一个简单的对象模型Carl Friedrich Bolz 是一位在伦敦国王大学任职的研究员，他沉迷于动态语言的实现及优化等领域而不可自拔。他是 PyPy/RPython 的核心开发者之一，于此同时，他也在为 Prolog, Racket, Smalltalk, PHP 和 Ruby 等语言贡献代码。这是他的 Twitter @cfbolz 。 开篇面向对象编程是目前被广泛使用的一种编程范式，这种编程范式也被大量现代编程语言所支持。虽然大部分语言给程序猿提供了相似的面向对象的机制，但是如果深究细节的话，还是能发现它们之间还是有很多不同的。大部分的语言的共同点在于都拥有对象处理和继承机制。而对于类来说的话，并不是每种语言都完美支持它。比如对于 Self 或者 JavaScript...</div></div></div></a><a class=pagination-related href=/posts/2016/10/25/Declarative-API-Design-in-Swift/ title="Swift 声明式程序设计"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/08/15/10/sculpture-7776861_1280.jpg onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class=info-1><div class=info-item-1>Next</div><div class=info-item-2>Swift 声明式程序设计</div></div><div class=info-2><div class=info-item-1>原文地址：Declarative API Design in Swift 原文作者：Benjamin Encz 译文出自：掘金翻译计划 译者：Zheaoli 校对者：luoyaqifei, Edison-Hsu 在我第一份 iOS 开发工程师的工作中，我编写了一个 XML 解析器和一个简单的布局工具，两个东西都是基于声明式接口。XML 解析器是基于 .plist 文件来实现 Objective-C 类关系映射。而布局工具则允许你利用类似 HTML 一样标签化的语法来实现界面布局（不过这个工具使用的前提是已经正确使用 AutoLayout &amp; CollectionViews）。 尽管这两个库都不完美，它们还是展现了声明式代码的四大优点： 关注点分离: 我们在使用声明式风格编写的代码时声明了意图，从而无需关注具体的底层实现，可以说这样的分离是自然发生的。 减少重复的代码: 所有声明式代码都共用一套样式实现，这里面很多属于配置文件，这样可以减少重复代码所带来的风险。 优秀的 API 设计: 声明式 API...</div></div></div></a></nav><div class=relatedPosts><div class=headline><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class=relatedPosts-list><a class=pagination-related href=/posts/2016/12/28/Someone-tell-me-that-you-think-Python-is-simple-2/ title="听说你会 Python （2）：Python 高阶数据结构解析"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/01/14/19/50/flower-7718952_1280.jpg alt=cover><div class="info text-center"><div class=info-1><div class=info-item-1><i class="far fa-calendar-alt fa-fw"></i> 2016-12-28</div><div class=info-item-2>听说你会 Python （2）：Python 高阶数据结构解析</div></div><div class=info-2><div class=info-item-1>前言之前写过一篇《听说你会 Python ？》的文章，大家反响都还不错，那么我想干脆把这个文章做成一个系列，继续讲解一下 Python 当中那些不为人知的细节吧。然后之前在和师父川爷讨论面试的时候，川爷说了一句“要是我，我就考考你们怎么去实现一个 namedtuple ，好用，方便，又能区分人”，说者无心，听者有意，我于是决定在这次的文章中，和大家聊一聊 Python 中一个特殊的高阶数据结构， namedtuple 的实现。 Let’s beginnamedtuple介绍tuple 是 Python 中 build-in 的一种特殊的数据结构，它是一种 immutable 的数据集合，我们经常会这样使用它 123456789def test(): a = (1, 2) print(a) return aif __name__ == &#x27;__main__&#x27;: b, c = test() print(a) Right，很多时候我们会直接使用 tuple 来进行一些数据的 packing/unpacking 的操作。OK，关于...</div></div></div></a><a class=pagination-related href=/posts/2016/10/12/Something-about-Descriptor/ title="Python 描述符入门指北"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/06/16/46/sea-7772372_1280.jpg alt=cover><div class="info text-center"><div class=info-1><div class=info-item-1><i class="far fa-calendar-alt fa-fw"></i> 2016-10-12</div><div class=info-item-2>Python 描述符入门指北</div></div><div class=info-2><div class=info-item-1>很久都没写 Flask 代码相关了，想想也真是惭愧，然并卵，这次还是不写 Flask 相关，不服你来打我啊（就这么贱，有本事咬我啊这次我来写一下 Python 一个很重要的东西，即 Descriptor （描述符） 初识描述符老规矩，Talk is cheap,Show me the code. 我们先来看看一段代码 1234567891011121314151617181920212223class Person(object): &quot;&quot;&quot;&quot;&quot;&quot; #---------------------------------------------------------------------- def __init__(self, first_name, last_name): &quot;&quot;&quot;Constructor&quot;&quot;&quot; self.first_name = first_name self.last_name =...</div></div></div></a><a class=pagination-related href=/posts/2017/11/27/something-about-concurrent-future/ title="Python concurrent.future 使用教程及源码初剖"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/08/15/10/sculpture-7776861_1280.jpg alt=cover><div class="info text-center"><div class=info-1><div class=info-item-1><i class="far fa-calendar-alt fa-fw"></i> 2017-11-28</div><div class=info-item-2>Python concurrent.future 使用教程及源码初剖</div></div><div class=info-2><div class=info-item-1>垃圾话很久没写博客了，想了想不能再划水，于是给自己定了一个目标，写点 concurrent.future 的内容，于是这篇文章就是来聊聊 Python 3.2 中新增的 concurrent.future 模块。 正文Python 的异步处理有一个 Python 开发工程师小明，在面试过程中，突然接到这样一个需求：去请求几个网站，拿到他们的数据，小明定睛一想，简单啊，噼里啪啦，他写了如下的代码 1234567891011121314import multiprocessingimport timedef request_url(query_url: str): time.sleep(3) # 请求处理逻辑if __name__ == &#x27;__main__&#x27;: url_list = [&quot;abc.com&quot;, &quot;xyz.com&quot;] task_list = [multiprocessing.Process(target=request_url, args=(url,)) for url in...</div></div></div></a><a class=pagination-related href=/posts/2019/04/27/something-about-pep-570/ title="随便聊聊 PEP570"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/01/30/19/40/gulls-7756481_1280.jpg alt=cover><div class="info text-center"><div class=info-1><div class=info-item-1><i class="far fa-calendar-alt fa-fw"></i> 2019-04-27</div><div class=info-item-2>随便聊聊 PEP570</div></div><div class=info-2><div class=info-item-1>最近沉迷与 MIT 6.824 这门分布式系统的课，无心写文章。不过看到 PEP570 被接受了，决定还是写篇水文随便聊聊 PEP 570 Python 的 argument在聊 PEP570 之前，我们先要来看看 Python 的 argument 变迁 早在 Python 1.0 或更早，Python 的 argument 系统就已经支持我们现在主要使用的两种参数形式了，一种是 positional 一种是 keyword，举几个例子 1234567891011def abc(a, b, c): passabc(1, 2, 3)abc(1, 2, c=3)abc(1, b=2, c=3)abc(*(1, 2, 3))abc(**&#123;&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3&#125;) 这是不是我们常见的集中使用方式？ 在发展了很长一段时间后，虽然期间有一些提案对 Python 的 argument 系统做优化和增强，但是一直都被 Reject，直到 PEP3102 的出现 3102...</div></div></div></a><a class=pagination-related href=/posts/2016/09/11/something-about-yield-in-python/ title="聊聊 Python 中生成器和协程那点事儿"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/38/cherry-blossoms-7766587_1280.jpg alt=cover><div class="info text-center"><div class=info-1><div class=info-item-1><i class="far fa-calendar-alt fa-fw"></i> 2016-09-11</div><div class=info-item-2>聊聊 Python 中生成器和协程那点事儿</div></div><div class=info-2><div class=info-item-1>文章来源：itsCoder 的 WeeklyBolg 项目 itsCoder主页：http://itscoder.com/ 作者：Manjusaka 审阅者：allenwu,Brucezz 写在前面的话本来想这周继续写写 Flask 那点破事儿的，但是想了想决定换换口味，来聊聊很不容易理解但是很重要的 Python 中的生成器和协程。 Generators 科普我猜大家对于生成器肯定并不陌生，但是为了能让我愉快的继续装逼，我们还是用点篇幅讲一下什么是生成器吧。比如在 Python 里，我们想生成一个范围 (1,100000) 的一个 list，于是我们无脑写了如下的代码出来 12345def generateList(start,stop):	tempList=[]	for i in range(start,stop): tempList.append(i)	return tempList 注1：这里有同学提出了为什么我们不直接返回 range(start,stop)，Nice question，这里涉及到一个基础问题，range...</div></div></div></a><a class=pagination-related href=/posts/2016/12/15/A-Simple-Object-Model/ title="用 Python 实现一个最简单的对象模型"><img class=cover src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/38/cherry-blossoms-7766588_1280.jpg alt=cover><div class="info text-center"><div class=info-1><div class=info-item-1><i class="far fa-calendar-alt fa-fw"></i> 2016-12-15</div><div class=info-item-2>用 Python 实现一个最简单的对象模型</div></div><div class=info-2><div class=info-item-1>原文地址：A Simple Object Model 原文作者：Carl Friedrich Bolz 译文出自：掘金翻译计划 译者：Zheaoli 校对者：Yuze Ma, Gran 一个简单的对象模型Carl Friedrich Bolz 是一位在伦敦国王大学任职的研究员，他沉迷于动态语言的实现及优化等领域而不可自拔。他是 PyPy/RPython 的核心开发者之一，于此同时，他也在为 Prolog, Racket, Smalltalk, PHP 和 Ruby 等语言贡献代码。这是他的 Twitter @cfbolz 。 开篇面向对象编程是目前被广泛使用的一种编程范式，这种编程范式也被大量现代编程语言所支持。虽然大部分语言给程序猿提供了相似的面向对象的机制，但是如果深究细节的话，还是能发现它们之间还是有很多不同的。大部分的语言的共同点在于都拥有对象处理和继承机制。而对于类来说的话，并不是每种语言都完美支持它。比如对于 Self 或者 JavaScript...</div></div></div></a></div></div><hr class=custom-hr><div id=post-comment><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class=comment-wrap><div><div id=disqus_thread></div></div></div></div></div><div class=aside-content id=aside-content><div class="card-widget card-info text-center"><div class=avatar-img><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/7054676?v=4" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt=avatar></div><div class=author-info-name>Manjusaka</div><div class=author-info-description>热忱之心不可磨灭</div><div class=site-data><a href=/archives/ ><div class=headline>Articles</div><div class=length-num>95</div></a><a href=/tags/ ><div class=headline>Tags</div><div class=length-num>58</div></a><a href=/categories/ ><div class=headline>Categories</div><div class=length-num>38</div></a></div><a id=card-info-btn target=_blank rel="noopener external nofollow noreferrer" href=https://github.com/Zheaoli><i class="fab fa-github"></i><span>Follow Me</span></a><div class=card-info-social-icons><a class=social-icon href=https://github.com/ZheaoLi rel="external nofollow noreferrer" target=_blank title=Github><i class="fab fa-github"></i></a><a class=social-icon href=mailto:me@manjusaka.me rel="external nofollow noreferrer" target=_blank title=Email><i class="fas fa-envelope"></i></a><a class=social-icon href=https://twitter.com/Manjusaka_Lee rel="external nofollow noreferrer" target=_blank title=推特><i class="fab fa-twitter"></i></a><a class=social-icon href=/atom.xml target=_blank title=RSS><i class="fa-solid fa-feed"></i></a></div></div><div class="card-widget card-announcement"><div class=item-headline><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class=announcement_content>This is my Blog</div></div><div class=sticky_layout><div class=card-widget id=card-toc><div class=item-headline><i class="fas fa-stream"></i><span>Contents</span><span class=toc-percentage></span></div><div class="toc-content is-expand"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%89%8D%E8%A8%80><span class=toc-number>1.</span> <span class=toc-text>前言</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#1-%E5%88%97%E8%A1%A8%E7%94%9F%E6%88%90%E5%99%A8><span class=toc-number>2.</span> <span class=toc-text>1.列表生成器</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%8F%8F%E8%BF%B0><span class=toc-number>2.1.</span> <span class=toc-text>描述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%AD%94%E6%A1%88><span class=toc-number>2.2.</span> <span class=toc-text>答案</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%A1%A5%E5%85%85><span class=toc-number>2.3.</span> <span class=toc-text>补充</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#2-%E8%A3%85%E9%A5%B0%E5%99%A8><span class=toc-number>3.</span> <span class=toc-text>2.装饰器</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%8F%8F%E8%BF%B0-1><span class=toc-number>3.1.</span> <span class=toc-text>描述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%AD%94%E6%A1%88-1><span class=toc-number>3.2.</span> <span class=toc-text>答案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#3-Python-%E8%B0%83%E7%94%A8%E6%9C%BA%E5%88%B6><span class=toc-number>4.</span> <span class=toc-text>3.Python 调用机制</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%8F%8F%E8%BF%B0-2><span class=toc-number>4.1.</span> <span class=toc-text>描述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%AD%94%E6%A1%88-2><span class=toc-number>4.2.</span> <span class=toc-text>答案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#4-%E6%8F%8F%E8%BF%B0%E7%AC%A6><span class=toc-number>5.</span> <span class=toc-text>4.描述符</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%8F%8F%E8%BF%B0-3><span class=toc-number>5.1.</span> <span class=toc-text>描述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%AD%94%E6%A1%88-3><span class=toc-number>5.2.</span> <span class=toc-text>答案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#5-Python-%E7%BB%A7%E6%89%BF%E6%9C%BA%E5%88%B6><span class=toc-number>6.</span> <span class=toc-text>5.Python 继承机制</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%8F%8F%E8%BF%B0-4><span class=toc-number>6.1.</span> <span class=toc-text>描述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%AD%94%E6%A1%88-4><span class=toc-number>6.2.</span> <span class=toc-text>答案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#6-Python-%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95><span class=toc-number>7.</span> <span class=toc-text>6. Python 特殊方法</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%8F%8F%E8%BF%B0-5><span class=toc-number>7.1.</span> <span class=toc-text>描述</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%AD%94%E6%A1%88-5><span class=toc-number>7.2.</span> <span class=toc-text>答案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%BB%93%E8%AF%AD><span class=toc-number>8.</span> <span class=toc-text>结语</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class="fas fa-history"></i><span>Recent Posts</span></div><div class=aside-list><div class=aside-list-item><a class=thumbnail href=/posts/2024/10/02/how-to-extend-the-wasi-python-by-using-host-function-cn/ title="如何使用 WASMTIME 来运行 CPython for WASI，然后利用 Python 实现的 HostFunction 来扩展它？"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/50/flower-7766608_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="如何使用 WASMTIME 来运行 CPython for WASI，然后利用 Python 实现的 HostFunction 来扩展它？"></a><div class=content><a class=title href=/posts/2024/10/02/how-to-extend-the-wasi-python-by-using-host-function-cn/ title="如何使用 WASMTIME 来运行 CPython for WASI，然后利用 Python 实现的 HostFunction 来扩展它？">如何使用 WASMTIME 来运行 CPython for WASI，然后利用 Python 实现的 HostFunction 来扩展它？</a><time datetime=2024-10-02T13:00:00.000Z title="Created 2024-10-02 21:00:00">2024-10-02</time></div></div><div class=aside-list-item><a class=thumbnail href=/posts/2024/10/02/how-to-extend-the-wasi-python-by-using-host-function-en/ title="How to Run CPython for WASI Using WASMTIME and Extend It with Python-Implemented Host Functions?"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/01/14/19/50/flower-7718952_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="How to Run CPython for WASI Using WASMTIME and Extend It with Python-Implemented Host Functions?"></a><div class=content><a class=title href=/posts/2024/10/02/how-to-extend-the-wasi-python-by-using-host-function-en/ title="How to Run CPython for WASI Using WASMTIME and Extend It with Python-Implemented Host Functions?">How to Run CPython for WASI Using WASMTIME and Extend It with Python-Implemented Host Functions?</a><time datetime=2024-10-02T13:00:00.000Z title="Created 2024-10-02 21:00:00">2024-10-02</time></div></div><div class=aside-list-item><a class=thumbnail href=/posts/2024/09/18/a-live-debug-ecapture-gh-604/ title="Debug 日志：eCapture GH-604"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/07/14/45/snow-7774312_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Debug 日志：eCapture GH-604"></a><div class=content><a class=title href=/posts/2024/09/18/a-live-debug-ecapture-gh-604/ title="Debug 日志：eCapture GH-604">Debug 日志：eCapture GH-604</a><time datetime=2024-09-18T14:00:00.000Z title="Created 2024-09-18 22:00:00">2024-09-18</time></div></div><div class=aside-list-item><a class=thumbnail href=/posts/2024/08/19/benchmark-for-python-web-framework-2024-part1-cn/ title="2024 年了，是 Gevent 还是选择 asyncio Part 1？"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/04/07/38/cherry-blossoms-7766588_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="2024 年了，是 Gevent 还是选择 asyncio Part 1？"></a><div class=content><a class=title href=/posts/2024/08/19/benchmark-for-python-web-framework-2024-part1-cn/ title="2024 年了，是 Gevent 还是选择 asyncio Part 1？">2024 年了，是 Gevent 还是选择 asyncio Part 1？</a><time datetime=2024-08-19T17:00:00.000Z title="Created 2024-08-20 01:00:00">2024-08-20</time></div></div><div class=aside-list-item><a class=thumbnail href=/posts/2024/08/19/benchmark-for-python-web-framework-2024-part1-en/ title="In 2024, Gevent or asyncio? Part 1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=https://cdn.pixabay.com/photo/2023/02/08/15/10/sculpture-7776861_1280.jpg onerror='this.onerror=null,this.src="/img/404.jpg"' alt="In 2024, Gevent or asyncio? Part 1"></a><div class=content><a class=title href=/posts/2024/08/19/benchmark-for-python-web-framework-2024-part1-en/ title="In 2024, Gevent or asyncio? Part 1">In 2024, Gevent or asyncio? Part 1</a><time datetime=2024-08-19T17:00:00.000Z title="Created 2024-08-20 01:00:00">2024-08-20</time></div></div></div></div><div class="card-widget ads-wrap"><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7962287588031867 data-ad-slot=1257383027 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></main><footer id=footer><div id=footer-wrap><div class=copyright>&copy;2020 - 2024 By Manjusaka</div><div class=framework-info><span>Framework </span><a target=_blank rel="noopener external nofollow noreferrer" href=https://hexo.io>Hexo</a><span class=footer-separator>|</span><span>Theme </span><a target=_blank rel="noopener external nofollow noreferrer" href=https://github.com/jerryc127/hexo-theme-butterfly>Butterfly</a></div></div></footer></div><div id=rightside><div id=rightside-config-hide></div><div id=rightside-config-show><button id=darkmode type=button title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id=translateLink type=button title="Toggle Between Traditional and Simplified Chinese">简</button><button id=readmode type=button title="Reading Mode"><i class="fas fa-book-open"></i></button><button id=go-up type=button title="Back to Top"><span class=scroll-percent></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src=https://www.manjusaka.blog/js/utils.js></script><script src=https://www.manjusaka.blog/js/main.js></script><script src=https://www.manjusaka.blog/js/tw_cn.js></script><script src=https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js></script><script src=https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js></script><script>(()=>{let t=()=>{"object"==typeof pangu?pangu.autoSpacingPage():btf.getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})};var n=()=>{t()};btf.addGlobalFn("pjaxComplete",n,"pangu"),document.addEventListener("DOMContentLoaded",n)})()</script><div class=js-pjax><script>(()=>{var e=()=>{var e;0!==(e=document.querySelectorAll("pre > code.mermaid")).length&&e.forEach(e=>{var t=document.createElement("pre"),d=(t.className="mermaid-src",t.hidden=!0,t.textContent=e.textContent,document.createElement("div"));d.className="mermaid-wrap",d.appendChild(t),e.parentNode.replaceWith(d)});let t=document.querySelectorAll("#article-container .mermaid-wrap");0!==t.length&&(e=()=>(e=>{window.loadMermaid=!0;let n="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach((e,t)=>{let d=e.firstElementChild;e=`%%{init:{ 'theme':'${n}'}}%%
`+d.textContent,t=mermaid.render("mermaid-"+t,e);let a=e=>{d.insertAdjacentHTML("afterend",e)};"string"==typeof t?a(t):t.then(({svg:e})=>a(e))})})(t),btf.addGlobalFn("themeChange",e,"mermaid"),window.loadMermaid?e():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(e))};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{function t(){this.page.url="https://www.manjusaka.blog/posts/2016/11/18/Someone-tell-me-that-you-think-Python-is-simple/",this.page.identifier="/posts/2016/11/18/Someone-tell-me-that-you-think-Python-is-simple/",this.page.title="听说你会 Python ？"}let e=()=>{window.DISQUS&&window.DISQUS.reset({reload:!0,config:t})};btf.addGlobalFn("themeChange",e,"disqus");var s=()=>{var t;window.DISQUS?e():((t=document.createElement("script")).src="https://manjusakablog.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),document.head.appendChild(t))};s()})()</script></div><script defer=defer id=fluttering_ribbon mobile=false src=https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js></script><script src=https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script async data-pjax src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></div><script data-pjax>function butterfly_swiper_injector_config(){var s=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),s.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2024/02/20/a-simple-discussion-about-the-ultraman/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/06/01/14/superb-fairywren-7770904_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-20</span><a class="blog-slider__title" href="/posts/2024/02/20/a-simple-discussion-about-the-ultraman/" alt="">简单聊聊奥特曼中很有趣的细节</a><div class="blog-slider__text">ヒーロが必要なんだよ，金城君。ヒーローが必要なんだ！</div><a class="blog-slider__button" href="/posts/2024/02/20/a-simple-discussion-about-the-ultraman/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/12/29/per-aspera-ad-astra/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/04/07/38/cherry-blossoms-7766588_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-29</span><a class="blog-slider__title" href="/posts/2023/12/29/per-aspera-ad-astra/" alt="">Per aspera, Ad astra</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="/posts/2023/12/29/per-aspera-ad-astra/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/10/24/open-source-is-simple-than-you-think/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/04/07/38/cherry-blossoms-7766588_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-10-24</span><a class="blog-slider__title" href="/posts/2023/10/24/open-source-is-simple-than-you-think/" alt="">开源可能没你想的那么难</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="/posts/2023/10/24/open-source-is-simple-than-you-think/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/06/25/love-and-hope-is-all-we-need/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://github.com/Zheaoli/yuque-py/assets/7054676/ea9460a2-e351-4b73-9f82-7aef6cd20c33" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-25</span><a class="blog-slider__title" href="/posts/2023/06/25/love-and-hope-is-all-we-need/" alt="">聊聊公益和助学</a><div class="blog-slider__text">很多时候，帮助人不需要那么多理由</div><a class="blog-slider__button" href="/posts/2023/06/25/love-and-hope-is-all-we-need/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/12/28/how-do-I-build-homelab-part2/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/07/14/45/snow-7774312_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-28</span><a class="blog-slider__title" href="/posts/2023/12/28/how-do-I-build-homelab-part2/" alt="">家庭 Homelab 升级计划: v2</a><div class="blog-slider__text">人生嘛，Homelab 图个乐子</div><a class="blog-slider__button" href="/posts/2023/12/28/how-do-I-build-homelab-part2/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/06/19/why-do-I-love-ultraman/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://user-images.githubusercontent.com/7054676/228287041-c86e7928-0da8-4097-b7ff-e575faa8cf8c.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-19</span><a class="blog-slider__title" href="/posts/2023/06/19/why-do-I-love-ultraman/" alt="">为什么奥特曼是我的信仰</a><div class="blog-slider__text">優しさを失わないでくれ。弱い者を労り互いに助け合い。</div><a class="blog-slider__button" href="/posts/2023/06/19/why-do-I-love-ultraman/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="/posts/2023/06/16/how-do-I-build-homelab/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/04/07/50/daisy-7766609_1280.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-16</span><a class="blog-slider__title" href="/posts/2023/06/16/how-do-I-build-homelab/" alt="">家庭 Homelab 升级计划</a><div class="blog-slider__text">人生嘛，Homelab 图个乐子</div><a class="blog-slider__button" href="/posts/2023/06/16/how-do-I-build-homelab/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer=defer src=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js></script><script defer=defer data-pjax src=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js></script><script async src=//at.alicdn.com/t/font_2032782_8d5kxvn09md.js></script></body></html>