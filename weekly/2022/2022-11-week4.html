<!DOCTYPE html><html lang="en" data-theme="auto"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Manjusaka | Manjusaka</title><meta name="author" content="Manjusaka"><meta name="copyright" content="Manjusaka"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="2022年11月第四周周报这周的周报又可以按时交了 生活 本周的早睡时间保持的不错，不过导致我看番时间少了很多 药物反应好了不少 本周的娱乐时间 德凯第19话，坂本接久弥出院了？我为什么会做这样的梦啊（不是。不过说回来，这话有个我很不爽的点就是对于战队的刻画太过于玩笑了。一个维护世界和平战队居然在队员失踪后没有响应我觉得属实离谱。目前来看奥系列两个刻画最好的战队一个是XIG 一个是 TCP，其余都">
<meta property="og:type" content="website">
<meta property="og:title" content="Manjusaka">
<meta property="og:url" content="https://manjusaka.blog/weekly/2022/2022-11-week4.html">
<meta property="og:site_name" content="Manjusaka">
<meta property="og:description" content="2022年11月第四周周报这周的周报又可以按时交了 生活 本周的早睡时间保持的不错，不过导致我看番时间少了很多 药物反应好了不少 本周的娱乐时间 德凯第19话，坂本接久弥出院了？我为什么会做这样的梦啊（不是。不过说回来，这话有个我很不爽的点就是对于战队的刻画太过于玩笑了。一个维护世界和平战队居然在队员失踪后没有响应我觉得属实离谱。目前来看奥系列两个刻画最好的战队一个是XIG 一个是 TCP，其余都">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.pixabay.com/photo/2023/02/06/01/14/superb-fairywren-7770904_1280.jpg">
<meta property="article:published_time" content="2023-06-19T06:30:47.995Z">
<meta property="article:modified_time" content="2023-06-19T06:30:47.995Z">
<meta property="article:author" content="Manjusaka">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://avatars.githubusercontent.com/u/7054676?v=4">
<meta name="twitter:creator" content="@Manjusaka_Lee">
<meta name="twitter:site" content="https://twitter.com/Manjusaka_Lee"><link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/7054676?v=4"><link rel="canonical" href="https://manjusaka.blog/weekly/2022/2022-11-week4.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="ohZ0A8YKJu755suq7WOIJkLGDfj3BGU4isb8RKI5Cj8"/><meta name="baidu-site-verification" content="codeva-seFAiiGXVd"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-154407994-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-154407994-1');
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":100,"languages":{"author":"Author: Manjusaka","link":"Link: ","source":"Source: Manjusaka","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#59C173","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Manjusaka',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-06-19 14:30:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Manjusaka" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/7054676?v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">73</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">51</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">32</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-fw fas fa-lines-leaning"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/random/"><i class="fa-fw fas fa-random"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/weekly/"><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heart"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-spa"></i><span> 关于</span></a></li><li><a class="site-page child" href="/weekly/"><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('https://pic2.zhimg.com/80/v2-7099d20a6239795a13c1525a44e243bd_1440w.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="Manjusaka"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/7054676?v=4# image"/><span class="site-name">Manjusaka</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-fw fas fa-lines-leaning"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/random/"><i class="fa-fw fas fa-random"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/weekly/"><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heart"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-spa"></i><span> 关于</span></a></li><li><a class="site-page child" href="/weekly/"><i class="fa-fw fas fa-newspaper"></i><span> 周报</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">Manjusaka</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><h1 id="2022年11月第四周周报"><a href="#2022年11月第四周周报" class="headerlink" title="2022年11月第四周周报"></a>2022年11月第四周周报</h1><p>这周的周报又可以按时交了</p>
<h2 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h2><ol>
<li>本周的早睡时间保持的不错，不过导致我看番时间少了很多</li>
<li>药物反应好了不少</li>
<li>本周的娱乐时间<ol>
<li>德凯第19话，坂本接久弥出院了？我为什么会做这样的梦啊（不是。不过说回来，这话有个我很不爽的点就是对于战队的刻画太过于玩笑了。一个维护世界和平战队居然在队员失踪后没有响应我觉得属实离谱。目前来看奥系列两个刻画最好的战队一个是<br>XIG 一个是 TCP，其余都有点玩笑（当然旧平成和昭和还是比新生代好了不知道多少个假面骑士（</li>
<li>间谍过家家第21话，我觉得这几话质量都不太行</li>
<li>柯南剧场版万圣节的新娘，简而言之是长征五号柯南限定皮肤，不过比绀青还是好了太多</li>
<li>樱花庄的宠物女孩，可爱（</li>
<li>COD19 的战区模式我还是落地成盒</li>
<li>刷完了食梦者，哇，真的好看看看看看看看！</li>
</ol>
</li>
<li>本周的闲书时间继续<ol>
<li>继续捡起《上帝的骰子》看</li>
</ol>
</li>
<li>这周是继续在家封控的一周，得自己做很多吃的。我突然有了一个梦想，就是有钱有闲之后去开一家以不亏本就行为目标的平民餐馆</li>
<li>家里的小猫咪们这周偷吃火腿的偷吃火腿，拆家的拆家。收拾现场时流得泪，是当年决定养猫时脑子进的水</li>
<li>这周和一位群友一起聊了聊，感慨不同的人真的有不一样的人生，这样听别人讲自己的人生的经历真的很棒</li>
</ol>
<h2 id="技术"><a href="#技术" class="headerlink" title="技术"></a>技术</h2><p>这周的我 be like：怎么一周突然就过去了</p>
<ol>
<li>我开始使用vim啦！经过周末两天的学习，我现在已经能正常使用了（本周报就是 vim 写的（某回忆出来挨打<ol>
<li>我放弃了 Lunavim 的配置，因为使用还是比较复杂了，我基于 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/glepnir/cosynvim">cosynvim</a> 的模板，封装了一套自己的配置</li>
<li>我在配置里加了一些自己需要的功能，比如 LSP 自动安装管理，比如 GitHub Copilot 支持</li>
<li>LSP 现在的使用体验真的不错</li>
<li>基于 LUA 写配置写插件真的很爽，看起来我之前入坑 vim 的原因就是 vimscript</li>
<li>过程式的声明真的很符合直觉</li>
</ol>
</li>
<li>这周群里在讨论 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/tensorchord/envd">envd</a> 的时候，聊到了 Docker 的几个缺陷<ol>
<li>Dockerfile 的可复用性太差了</li>
<li>很多 Buildkit 支持的很有用的特性支持都很奇葩</li>
<li>Dockerfile 很多时候的还是面向状态的描述而不是过程的描述，进而导致其可复用性太差</li>
</ol>
</li>
<li>这周还是花了一些时间在 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/containerd/nerdctl">nerdctl</a> 上<ol>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/containerd/nerdctl/issues/1425">Issue1425</a> 写了一个正式的 Proposal，参见 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/containerd/nerdctl/issues/1560">Issue1560</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/containerd/nerdctl/issues/1329">Issue1329</a> 的进度比我想的慢一些</li>
<li>这周和 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://twitter.com/realyuchanns">@yuchanns</a> 聊了下为什么 nerdctl 现在都还不支持 <code>network connect</code> 的原因，本质上还是因为 nerdctl 在设计之初的定位在一个弱状态的 CLI，没有 daemon，很难去维护一些重状态的操作。<code>network connect</code> 是个很典型的例子，将 network 和一个已经存在的 container 打通。这个过程一旦状态维护不对，那么 iptables 之类的资源泄漏的副作用会非常大</li>
</ol>
</li>
<li>这周查了业务那边比较蛋疼的一个线上事故，对于慢查询这种东西，日志的存在过于重要</li>
<li>这周群里大概定了一下明年大家集体的 OKR<ol>
<li>O1: 公益<ol>
<li>通过公益刷题/分享之类的活动，凑集超3000元捐款</li>
</ol>
</li>
<li>O2: 开源项目<ol>
<li>新增一位开源项目的 maintainer</li>
<li>全年各开源项目代码 PR 数超过 15</li>
</ol>
</li>
</ol>
</li>
<li>这周读了 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.sosp.org/2001/papers/welsh.pdf">SEDA: An Architecture for Well-Conditioned, Scalable Internet Services</a> 这篇论文，有点年头了，UCB 在 SOSP 2021 上的论文（里面测试环境都还是 2G RAM（XD，不过里面的思想在后面很多的项目上都能见到影子，可能会在群论文分享会上聊下这篇文章，这里先简单记一下<ol>
<li>这篇文章的核心还是在说处理高负载流量下的一些手段<ol>
<li>基础的 per-request, per-thread 模形，在这篇论文的写作的时间下，Apache，IIS 之类的都是这个模型。缺陷就很明显了，请求多的时候，线程太多，导致系统的负载太高，调度 overhead 太大（经典面试八股文)，作者有个很经典的描述 “the design of these systems is still based on multiprogramming, as the focus continues to be on safe and efficient resource virtualization, rather than on graceful management and high concurrency.”</li>
<li>线程池模型，作者认为这个模型的缺陷在于，线程池的大小是固定的，如果线程池的大小不够，那么就会导致请求的排队，这个排队的过程会导致请求的延迟变大，如果线程池的大小太大，那么就会导致系统的负载太高，调度overhead 太大。另外一个是，需要根据不同的负载进行线程池的划分，有个很好的例子，比如有两类请求，一类是读文件再返回的重请求，一类是直接从缓存里返回的轻请求，即便在整体系统负载偏低的情况下，如果突然来了几个重请求，把所有线程池的线程都吃了。这个时候后续的轻请求就只能继续排队了，即便只需要一个线程处理就行了。换句话说线程池的公平性调度是个问题。</li>
<li>事件驱动模型，所有 blocking I/O 都被转化成 event，然后投递到各个子模块进行执行。每个子模块都有自己的 FSM，request context 就会被 FSM 管理起来（有没有很熟悉，实际上就是 Nginx 的经典做法）。不过缺点也很明显<ol>
<li>request context 的维护实际上比较麻烦</li>
<li>一处 blocking 可能会导致全局 blocking</li>
<li>每增加一处子模块可能就需要修改 event dispatcher 的逻辑（</li>
</ol>
</li>
</ol>
</li>
<li>然后提出了核心的 SEDA 模型，将一个理想系统的处理划分为若干个 stage，stage 之间通过 event queue/subroutine call 进行通信。每个 stage 的 controller 面对 resource 建模，支持批处理，这样来尽可能的扩大系统的吞吐能力。不过缺陷也比较明显<ol>
<li>stage 的合理划分。论文本身建立在业务都是可以抽象为一个理想的 pipeline 的基础上，理想很丰满，现实很骨感。实际上这个就有点变成领域建模的意思了</li>
<li>批处理还是需要对任务载荷进行分类，而且受限于这篇论文所处的时代，可能没考虑批处理的原子性的问题</li>
</ol>
</li>
<li>作者表示能正确衡量系统 bottleneck 的测试集很重要。瞎 benchmark 等于没 benchmark，点名批评现在各路 DB 动不动就 benchmark（逃</li>
</ol>
</li>
<li>这周我被提名为 nerdctl 的 committer 了，拥有对仓库更大的权限了（意味着更大的责任了。新进群的 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://twitter.com/realyuchanns">@yuchanns</a> 也被提名为 reviwer 了，开心（</li>
<li>写了一篇水文聊聊我的开源经历，参见 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.manjusaka.blog/posts/2022/11/22/why-i-love-the-open-source-community/">我所热爱的开源社区</a> 。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://user-images.githubusercontent.com/7054676/204143126-6d328f30-9774-444a-9be9-8b9a4c8c4f7e.png" alt="嗯，开心"></p>
<p>差不多就这样</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote>
<p>愿中国青年都摆脱冷气，只是向上走。 不要听自暴自弃者的话。 能做事的做事，能发声的发声。 有一份光，发一份热。 就令萤火一般，也可以再黑暗里发一点光。</p>
</blockquote>
<p>诸君保重</p>
</div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/7054676?v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Manjusaka</div><div class="author-info__description">热忱之心不可磨灭</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">73</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">51</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">32</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/youngjuning"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ZheaoLi" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:me@manjusaka.me" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://twitter.com/Manjusaka_Lee" rel="external nofollow noreferrer" target="_blank" title="推特"><i class="fab fa-twitter"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/2023/06/16/how-do-I-build-homelab/" title="家庭 Homelab 升级计划"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/04/07/50/daisy-7766609_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="家庭 Homelab 升级计划"/></a><div class="content"><a class="title" href="/posts/2023/06/16/how-do-I-build-homelab/" title="家庭 Homelab 升级计划">家庭 Homelab 升级计划</a><time datetime="2023-06-16T16:00:00.000Z" title="Created 2023-06-17 00:00:00">2023-06-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2023/03/12/a-simple-introduction-about-iac/" title="简单聊聊 IaC：Infrastructure as Code"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/07/14/45/snow-7774312_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="简单聊聊 IaC：Infrastructure as Code"/></a><div class="content"><a class="title" href="/posts/2023/03/12/a-simple-introduction-about-iac/" title="简单聊聊 IaC：Infrastructure as Code">简单聊聊 IaC：Infrastructure as Code</a><time datetime="2023-03-12T13:00:00.000Z" title="Created 2023-03-12 21:00:00">2023-03-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2023/01/26/what-I-can-learn-from-a-refactor-project/" title="从一个重构项目中能学到什么东西"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/06/16/46/sea-7772372_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从一个重构项目中能学到什么东西"/></a><div class="content"><a class="title" href="/posts/2023/01/26/what-I-can-learn-from-a-refactor-project/" title="从一个重构项目中能学到什么东西">从一个重构项目中能学到什么东西</a><time datetime="2023-01-26T16:00:00.000Z" title="Created 2023-01-27 00:00:00">2023-01-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2023/01/19/simple-brief-about-blue-lotus-group/" title="蓝莲花公益小组简报"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/04/07/38/cherry-blossoms-7766587_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="蓝莲花公益小组简报"/></a><div class="content"><a class="title" href="/posts/2023/01/19/simple-brief-about-blue-lotus-group/" title="蓝莲花公益小组简报">蓝莲花公益小组简报</a><time datetime="2023-01-19T11:00:00.000Z" title="Created 2023-01-19 19:00:00">2023-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2023/01/07/special-case-no-space-left-on-device/" title="排查一个特殊的 No space left on device"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.pixabay.com/photo/2023/02/08/15/10/sculpture-7776861_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="排查一个特殊的 No space left on device"/></a><div class="content"><a class="title" href="/posts/2023/01/07/special-case-no-space-left-on-device/" title="排查一个特殊的 No space left on device">排查一个特殊的 No space left on device</a><time datetime="2023-01-07T15:30:00.000Z" title="Created 2023-01-07 23:30:00">2023-01-07</time></div></div></div></div><div class="card-widget ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7962287588031867" data-ad-slot="1257383027" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Homelab/"><span class="card-category-list-name">Homelab</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BA%BA%E7%94%9F/"><span class="card-category-list-name">人生</span><span class="card-category-list-count">4</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BA%BA%E7%94%9F/%E6%9D%82%E8%AE%B0/"><span class="card-category-list-name">杂记</span><span class="card-category-list-count">4</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BA%BA%E9%97%B4%E4%B8%96/"><span class="card-category-list-name">人间世</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="card-category-list-name">工具</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/%E8%BE%93%E5%85%A5%E6%B3%95/"><span class="card-category-list-name">输入法</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/%E8%BE%93%E5%85%A5%E6%B3%95/Rime/"><span class="card-category-list-name">Rime</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/"><span class="card-category-list-name">技术</span><span class="card-category-list-count">3</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/%E6%9D%82%E8%AE%B0/"><span class="card-category-list-name">杂记</span><span class="card-category-list-count">3</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/"><span class="card-category-list-name">生活</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/%E7%A4%BE%E4%BC%9A/" style="font-size: 1.2em; color: rgb(163, 30, 80)">社会</a><a href="/tags/PKU/" style="font-size: 1.2em; color: rgb(109, 39, 14)">PKU</a><a href="/tags/Python/" style="font-size: 1.42em; color: rgb(113, 46, 16)">Python</a><a href="/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 1.45em; color: rgb(184, 49, 60)">编程</a><a href="/tags/Flask/" style="font-size: 1.31em; color: rgb(189, 128, 156)">Flask</a><a href="/tags/%E6%8E%98%E9%87%91%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/" style="font-size: 1.18em; color: rgb(130, 24, 106)">掘金翻译计划</a><a href="/tags/Linux/" style="font-size: 1.37em; color: rgb(1, 106, 144)">Linux</a><a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 1.18em; color: rgb(152, 29, 177)">容器</a><a href="/tags/iOS/" style="font-size: 1.29em; color: rgb(39, 141, 14)">iOS</a><a href="/tags/Swift/" style="font-size: 1.29em; color: rgb(198, 54, 158)">Swift</a><a href="/tags/%E4%BA%BA%E9%97%B4%E4%B8%96/" style="font-size: 1.15em; color: rgb(38, 41, 64)">人间世</a><a href="/tags/%E9%BB%91%E9%AD%94%E6%B3%95/" style="font-size: 1.18em; color: rgb(142, 61, 85)">黑魔法</a><a href="/tags/%E7%BC%96%E7%A8%8B%E6%8A%80%E5%B7%A7/" style="font-size: 1.26em; color: rgb(37, 107, 14)">编程技巧</a><a href="/tags/%E5%8D%8F%E7%A8%8B/" style="font-size: 1.18em; color: rgb(119, 175, 97)">协程</a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 1.34em; color: rgb(68, 91, 31)">笔记</a><a href="/tags/%E6%B0%B4%E6%96%87/" style="font-size: 1.4em; color: rgb(62, 1, 194)">水文</a><a href="/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" style="font-size: 1.29em; color: rgb(82, 200, 72)">源码阅读</a><a href="/tags/Node-js/" style="font-size: 1.15em; color: rgb(60, 143, 21)">Node.js</a><a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 1.31em; color: rgb(10, 36, 184)">随笔</a><a href="/tags/SRE/" style="font-size: 1.15em; color: rgb(178, 42, 173)">SRE</a><a href="/tags/Tools/" style="font-size: 1.15em; color: rgb(131, 200, 22)">Tools</a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.15em; color: rgb(25, 114, 51)">分布式</a><a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 1.15em; color: rgb(20, 34, 82)">论文</a><a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 1.26em; color: rgb(8, 134, 161)">总结</a><a href="/tags/%E4%BA%BA%E7%94%9F/" style="font-size: 1.23em; color: rgb(199, 81, 49)">人生</a><a href="/tags/%E6%9D%82%E8%AE%B0/" style="font-size: 1.29em; color: rgb(162, 69, 66)">杂记</a><a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 1.15em; color: rgb(49, 118, 31)">随想</a><a href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/" style="font-size: 1.15em; color: rgb(1, 8, 31)">云原生</a><a href="/tags/Homelab/" style="font-size: 1.15em; color: rgb(90, 175, 171)">Homelab</a><a href="/tags/eBPF/" style="font-size: 1.15em; color: rgb(112, 117, 45)">eBPF</a></div></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">73</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2020-01-29T00:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">195.1k</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-06-19T06:31:18.774Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Manjusaka</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/tw_cn.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>function loadDisqus () {
  const disqus_config = function () {
    this.page.url = 'https://manjusaka.blog/weekly/2022/2022-11-week4.html'
    this.page.identifier = '/weekly/2022/2022-11-week4.html'
    this.page.title = ''
  }

  const disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addModeChange('disqus', disqusReset)

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://manjusakablog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<code>.*?<\/code>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=manjusakablog&related=thread&limit=6&api_key=')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        saveToLocal.set('disqus-newest-comments', JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "Unable to get the data, please make sure the settings are correct."
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('disqus-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/search/local-search.min.js"></script></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>