# 2022年9月第三周周报

嗯，**向贵州高速车祸中遇难的同胞默哀**

## 生活

1. 本周状态还不错
2. 减重计划进行中，不过还是要坚持坚持再坚持
3. 不过可能因为最近作息过于不规律，我过敏性皮炎又犯了。。
4. 本周娱乐时间
    1. 德凯第10话，梦回旧平成了卧操，人与非人种族之间的关系怎么处理。镜头处理的也很棒，演员调教的很不错，镜头的话能明显看出来是吸取了好莱坞不少巨大化 CG 的手法。我觉得是新生代里最眼前一亮的拍摄
    2. 本周石蒜十二话更新，在人耳朵两边开枪利用噪声让人失能。石蒜的细节做的真的很不错
    3. 银魂.jpg
    4. 小说《小阁老》，喜欢历史文的同学可以看看
5. 闲书时间继续
6. 本周的改善伙食：日式烤肉，简直是好吃好吃好吃
7. 最近看各种新闻，也是感叹人间疾苦
8. 一点小事，让我觉得父母也真是老了

本周的读书时间

1. 置身事内：中国政府与经济发展
2. 史上最伟大的交易

最近开始看一些政治经济学的书，发现还是很有意思的，能很有效的弥补我之前的知识面的缺陷

![猫猫抬头](https://user-images.githubusercontent.com/7054676/190915643-5b8251ed-6538-4aa6-b6e2-4b8b4d1f9ec1.png)

![烤肉烤肉我爱你（](https://user-images.githubusercontent.com/7054676/190915667-29b772fe-50ef-4e07-9412-542efd77dffe.png)

## 技术

这周忙于工作上的事，感觉社区这块的贡献不多，下周得努力一下了

1. 本周还是花了一些时间在 [nerdctl](https://github.com/containerd/nerdctl) 上
    1. 上周的新坑 [Issue1374](https://github.com/containerd/nerdctl/issues/1374) ，我把 fluentd 的东西写完了，下周也许能搞个 PR
    2. Podman 的 DNS 解决方案 [dnsname](https://github.com/containers/dnsname) ，本质上通过一个 network 起一个 dnsmasq，来解决多容器共享 Network 中的 DNS 问题。比用 `/etc/hosts` 优雅一些，但是起太多 dnsmasq 也会是一个负担。有点拿不准这个 trade-off 了，下周在社区发起讨论聊一下这个话题
2. 本周和 [AFFiNE](https://github.com/toeverything/AFFiNE/) 团队的同学聊了一下开发者社区运营的问题（迷弟也见到了雪碧大佬）
    1. 开源社区核心的原则还是信息透明化，利用 RFC/Proposal 来尽可能的提早公开相关的信息，能够让更多的社区的关注者拿到足够的上下文。可能很多人对于 RFC/Proposal 有一些误解。对于不同的社区而言，有着不同的治理模式，Vote or BDFL 都是可以让人接受的。 RFC/Proposal 更大的意义在于社区成员的 comment ，而不是单纯的 Vote
    2. 对于一些大型功能的新增/重构，尽早的提出 PR，然后合理利用 Draft 或者 WIP，让大家方便 track 一个 PR，尽可能避免不声不响一个超大 PR 进来，这点 logseq 最近有个很不错的例子 [PR6475](https://github.com/logseq/logseq/pull/6475)
    3. 对于一个组织而言，如何避免信息黑盒是个非常值得讨论的问题
3. 本周又是和可观测性战斗的一周
    1. 在治理 Sentry 之后，业务层面的报错源能够被用数据精确的评估，两个迭代之后，线上报错得到明显收敛。进而形成一个“报错分析->反馈业务->数据反馈更正效果”的正向循环。这也说明稳定性建设中两个基本要素的重要性
        1. 对于稳定性的评估指标一定要可量化，不可量化的指标没有任何意义
        2. 稳定性项目需要持续迭代与跟进，猪突式毕其功于一役的稳定性建设毫无意义
    2. 本周在写一个自定义指标上报的项目，如何处理业务各种变化极快的上报需求是个挺值得思考的问题
4. 本周和 cache/DB 战斗了一些时日
    1. tidb 5.x 的 DDL 设计也是一言难尽，具体可以参考我的推上的吐槽
    2. 本周处理了一个标准的缓存雪崩的问题。业务方存在大 key，以及所有 key 的 TTL 都是 30 的整数倍，在某一时刻集中失效后，集中写入导致 Redis 负载急剧升高，升高后的业务超时重试机制又进一步雪崩了整个系统（过于标准的八股文场景
        1. Redis 一定要持续治理大 key
        2. 对于 TTL 一定要离散化处理
        3. 善于利用 Cloud-Vendor 的故障转移机制（self-hosted 尽可能集群化处理），先救命，再治病

![一点吐槽](https://user-images.githubusercontent.com/7054676/190915611-9f49db15-eba7-425f-8c12-779993260020.png)

## 总结

![一点破防](https://user-images.githubusercontent.com/7054676/190915697-4fddc441-cc72-4c29-883d-18ffaba41b0c.png)

父母真的老了，我也得再快点而立了（
